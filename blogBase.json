{"singlePage": [], "startSite": "12/1/2025", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "style": "", "head": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "needComment": 1, "allHead": "<script src='https://blog.meekdai.com/Gmeek/plugins/GmeekBSZ.js'></script>", "title": "\u6155\u7136\u79d1\u6280Scratch\u79ef\u6728\u6269\u5c55\u5e93", "subTitle": "\u6155\u7136\u79d1\u6280\u5b98\u7f51https://ccwmoran.github.io", "avatarUrl": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "GMEEK_VERSION": "last", "postListJson": {"P1": {"htmlDir": "docs/post/Morgan-de-gong-ju-xiang-V8.html", "labels": ["\u9002\u914dGandiIDE", "\u9002\u914dTurboWarp", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668"], "postTitle": "Morgan\u7684\u5de5\u5177\u7bb1V8", "postUrl": "post/Morgan-de-gong-ju-xiang-V8.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/1", "commentNum": 0, "wordCount": 32517, "description": "\n```\n//\u5b98\u7f51https://ccwmoran.github.io\nclass MorganToolboxV8{\nconstructor(){this.lastResponse=''}\ngetInfo(){\nreturn{\nid:'M8',name:'Morgan\u7684\u5de5\u5177\u7bb1V8',color1:0x5ca05c,color2:0x5ca05c,\nblocks:[\n{opcode:'getDeviceModel',blockType:Scratch.BlockType.REPORTER,text:'\u8bbe\u5907\u578b\u53f7'},\n{opcode:'getBrowserName',blockType:Scratch.BlockType.REPORTER,text:'\u6d4f\u89c8\u5668\u540d\u79f0'},\n{opcode:'toggleFullscreen',blockType:Scratch.BlockType.COMMAND,text:'\u8fdb\u5165/\u9000\u51fa\u5168\u5c4f'},\n{opcode:'isTouchSupported',blockType:Scratch.BlockType.BOOLEAN,text:'\u662f\u5426\u652f\u6301\u89e6\u5c4f'},\n{opcode:'generateRandomColor',blockType:Scratch.BlockType.REPORTER,text:'\u751f\u62106\u4f4d\u968f\u673a\u989c\u8272\u503c'},\n{opcode:'generateRandomInt',blockType:Scratch.BlockType.REPORTER,text:'\u751f\u6210\u968f\u673a\u4e00\u4e2a [DIGITS] \u4f4d\u6574\u6570',arguments:{DIGITS:{type:Scratch.ArgumentType.NUMBER,defaultValue:3}}},\n{opcode:'isOnline',blockType:Scratch.BlockType.BOOLEAN,text:'\u8bbe\u5907\u662f\u5426\u8054\u7f51'},\n{opcode:'isInEditor',blockType:Scratch.BlockType.BOOLEAN,text:'\u662f\u5426\u5728\u7f16\u8f91\u5668\u5185'},\n{opcode:'hasCamera',blockType:Scratch.BlockType.BOOLEAN,text:'\u662f\u5426\u6709\u6444\u50cf\u5934'},\n{opcode:'getCurrentDate',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u5f53\u524d\u5e74\u6708\u65e5'},\n{opcode:'getCurrentTime',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u5f53\u524d\u65f6\u5206\u79d2'},\n{opcode:'getWeekday',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u4eca\u65e5\u661f\u671f\u51e0'},\n{opcode:'showAlert',blockType:Scratch.BlockType.COMMAND,text:'\u4f7f\u7528\u6d4f\u89c8\u5668\u5f39\u7a97\uff08\u7eaf\u6587\u672c\uff09[TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World!'}}},\n{opcode:'showPrompt',blockType:Scratch.BlockType.REPORTER,text:'\u4f7f\u7528\u6d4f\u89c8\u5668\u5f39\u7a97\uff08\u8f93\u5165\u6846\uff09[QUESTION]',arguments:{QUESTION:{type:Scratch.ArgumentType.STRING,defaultValue:'\u8bf7\u8f93\u5165\u5185\u5bb9'}}},\n{opcode:'showOptions',blockType:Scratch.BlockType.REPORTER,text:'\u4f7f\u7528\u6d4f\u89c8\u5668\u5f39\u7a97\uff08\u9009\u9879\u9009\u62e9\uff09[OPTIONS]',arguments:{OPTIONS:{type:Scratch.ArgumentType.STRING,defaultValue:'\u9009\u98791,\u9009\u98792,\u9009\u98793'}}},\n{opcode:'showDatePicker',blockType:Scratch.BlockType.REPORTER,text:'\u4f7f\u7528\u6d4f\u89c8\u5668\u5f39\u7a97\uff08\u65e5\u671f\u9009\u62e9\uff09'},\n{opcode:'showColorPicker',blockType:Scratch.BlockType.REPORTER,text:'\u4f7f\u7528\u6d4f\u89c8\u5668\u5f39\u7a97\uff08\u989c\u8272\u9009\u62e9\uff09'},\n{opcode:'getCurrentURL',blockType:Scratch.BlockType.REPORTER,text:'\u5f53\u524d\u9875\u9762\u7f51\u5740'},\n{opcode:'getCurrentTitle',blockType:Scratch.BlockType.REPORTER,text:'\u5f53\u524d\u9875\u9762\u6807\u9898'},\n{opcode:'openInNewTab',blockType:Scratch.BlockType.COMMAND,text:'\u5728\u65b0\u6807\u7b7e\u9875\u6253\u5f00 [URL]',arguments:{URL:{type:Scratch.ArgumentType.STRING,defaultValue:'https://scratch.mit.edu'}}},\n{opcode:'setPageTitle',blockType:Scratch.BlockType.COMMAND,text:'\u4fee\u6539\u9875\u9762\u6807\u9898\u4e3a [TITLE]',arguments:{TITLE:{type:Scratch.ArgumentType.STRING,defaultValue:'\u65b0\u6807\u9898'}}},\n{opcode:'refreshPage',blockType:Scratch.BlockType.COMMAND,text:'\u5237\u65b0\u8be5\u9875\u9762'},\n{opcode:'copyToClipboard',blockType:Scratch.BlockType.COMMAND,text:'\u590d\u5236 [TEXT] \u5230\u526a\u8d34\u677f',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'\u8981\u590d\u5236\u7684\u6587\u672c'}}},\n{opcode:'base64Operation',blockType:Scratch.BlockType.REPORTER,text:'base64 [OPERATION] [CONTENT]',arguments:{OPERATION:{type:Scratch.ArgumentType.STRING,menu:'base64Menu',defaultValue:'\u7f16\u7801'},CONTENT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World!'}}},\n{opcode:'getLocationInfo',blockType:Scratch.BlockType.REPORTER,text:'\u6240\u5728\u56fd\u5bb6\u7701\u4efd\u57ce\u5e02'},\n{opcode:'downloadFile',blockType:Scratch.BlockType.COMMAND,text:'\u4e0b\u8f7d\u6587\u4ef6 \u5185\u5bb9:[CONTENT] \u6587\u4ef6\u540d:[FILENAME]',arguments:{CONTENT:{type:Scratch.ArgumentType.STRING,defaultValue:'\u6587\u4ef6\u5185\u5bb9'},FILENAME:{type:Scratch.ArgumentType.STRING,defaultValue:'example.txt'}}},\n{opcode:'calculateDaysBetween',blockType:Scratch.BlockType.REPORTER,text:'\u4ece [START] \u5230 [END] \u6709\u51e0\u5929',arguments:{START:{type:Scratch.ArgumentType.STRING,defaultValue:'2025.1.1'},END:{type:Scratch.ArgumentType.STRING,defaultValue:'2025.12.31'}}},\n{opcode:'closeCurrentPage',blockType:Scratch.BlockType.COMMAND,text:'\u5173\u95ed\u5f53\u524d\u9875\u9762'},\n{opcode:'generateRandomEmojis',blockType:Scratch.BlockType.REPORTER,text:'\u7ed9\u51fa [COUNT] \u4e2a\u968f\u673aemoji\u8868\u60c5\u7b26\u53f7',arguments:{COUNT:{type:Scratch.ArgumentType.NUMBER,defaultValue:5}}},\n{opcode:'runHTMLCode',blockType:Scratch.BlockType.COMMAND,text:'\u8fd0\u884chtml\u4ee3\u7801\uff1a[HTML_CODE]',arguments:{HTML_CODE:{type:Scratch.ArgumentType.STRING,defaultValue:'<div>Hello World!</div>'}}},\n{opcode:'getBatteryLevel',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u7535\u6c60\u7535\u91cf\u767e\u5206\u6bd4'},\n{opcode:'vibrateDevice',blockType:Scratch.BlockType.COMMAND,text:'\u632f\u52a8\u8bbe\u5907 [DURATION] \u6beb\u79d2',arguments:{DURATION:{type:Scratch.ArgumentType.NUMBER,defaultValue:200}}},\n{opcode:'shareContent',blockType:Scratch.BlockType.COMMAND,text:'\u5206\u4eab\u5185\u5bb9 [TEXT] [URL]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'\u770b\u770b\u8fd9\u4e2a!'},URL:{type:Scratch.ArgumentType.STRING,defaultValue:window.location.href}}},\n{opcode:'getScreenResolution',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u5c4f\u5e55\u5206\u8fa8\u7387'},\n{opcode:'checkNetworkSpeed',blockType:Scratch.BlockType.REPORTER,text:'\u68c0\u6d4b\u7f51\u7edc\u8fde\u63a5\u901f\u5ea6'},\n{opcode:'getClipboardText',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u526a\u8d34\u677f\u6587\u672c'},\n{opcode:'takeScreenshot',blockType:Scratch.BlockType.COMMAND,text:'\u622a\u53d6\u5c4f\u5e55\u622a\u56fe'},\n{opcode:'getSystemTheme',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u7cfb\u7edf\u4e3b\u9898\u6a21\u5f0f'},\n{opcode:'getUserLanguage',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u7cfb\u7edf\u8bed\u8a00'},\n{opcode:'getCPUInfo',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6CPU\u6838\u5fc3\u6570'},\n{opcode:'isCookieEnabled',blockType:Scratch.BlockType.BOOLEAN,text:'Cookie\u662f\u5426\u542f\u7528'},\n{opcode:'getPageFavicon',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u7f51\u7ad9\u56fe\u6807URL'},\n{opcode:'getMemoryInfo',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u5185\u5b58\u4fe1\u606f'},\n{opcode:'getUserAgent',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u6d4f\u89c8\u5668UserAgent'},\n{opcode:'getViewportSize',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u89c6\u53e3\u5927\u5c0f'},\n{opcode:'isJavaScriptEnabled',blockType:Scratch.BlockType.BOOLEAN,text:'JavaScript\u662f\u5426\u542f\u7528'},\n{opcode:'getPlatformInfo',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u5e73\u53f0\u4fe1\u606f'},\n{opcode:'getConnectionType',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u7f51\u7edc\u8fde\u63a5\u7c7b\u578b'},\n{opcode:'getPageLoadTime',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u9875\u9762\u52a0\u8f7d\u65f6\u95f4'},\n{opcode:'getScrollPosition',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u6eda\u52a8\u4f4d\u7f6e'},\n{opcode:'isDoNotTrackEnabled',blockType:Scratch.BlockType.BOOLEAN,text:'\u662f\u5426\u542f\u7528\u7981\u6b62\u8ddf\u8e2a'},\n{opcode:'getReferrer',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u6765\u6e90\u9875\u9762'},\n{opcode:'getTimezone',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u65f6\u533a\u4fe1\u606f'},\n{opcode:'getDeviceOrientation',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u8bbe\u5907\u65b9\u5411'},\n{opcode:'getNetworkLatency',blockType:Scratch.BlockType.REPORTER,text:'\u68c0\u6d4b\u7f51\u7edc\u5ef6\u8fdf'},\n{opcode:'getStorageUsage',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u5b58\u50a8\u4f7f\u7528\u60c5\u51b5'},\n{opcode:'isPWAInstalled',blockType:Scratch.BlockType.BOOLEAN,text:'\u662f\u5426\u4e3aPWA\u5e94\u7528'},\n{opcode:'getMediaDevices',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u5a92\u4f53\u8bbe\u5907\u5217\u8868'},\n{opcode:'createQRCode',blockType:Scratch.BlockType.REPORTER,text:'\u751f\u6210\u4e8c\u7ef4\u7801 [TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'https://scratch.mit.edu'}}},\n{opcode:'speakText',blockType:Scratch.BlockType.COMMAND,text:'\u6717\u8bfb\u6587\u672c [TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'}}},\n{opcode:'stopSpeaking',blockType:Scratch.BlockType.COMMAND,text:'\u505c\u6b62\u6717\u8bfb'},\n{opcode:'getGeolocation',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\u5750\u6807'},\n{opcode:'getSunriseSunset',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u65e5\u51fa\u65e5\u843d\u65f6\u95f4'},\n{opcode:'calculateAge',blockType:Scratch.BlockType.REPORTER,text:'\u8ba1\u7b97\u5e74\u9f84 \u751f\u65e5:[BIRTHDAY]',arguments:{BIRTHDAY:{type:Scratch.ArgumentType.STRING,defaultValue:'2000.1.1'}}},\n{opcode:'countdownTimer',blockType:Scratch.BlockType.REPORTER,text:'\u5012\u8ba1\u65f6 [TARGET_TIME]',arguments:{TARGET_TIME:{type:Scratch.ArgumentType.STRING,defaultValue:'2025-12-31 23:59:59'}}},\n{opcode:'getMoonPhase',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u4eca\u65e5\u6708\u76f8'},\n{opcode:'generatePassword',blockType:Scratch.BlockType.REPORTER,text:'\u751f\u6210\u5bc6\u7801 \u957f\u5ea6:[LENGTH]',arguments:{LENGTH:{type:Scratch.ArgumentType.NUMBER,defaultValue:12}}},\n{opcode:'analyzeText',blockType:Scratch.BlockType.REPORTER,text:'\u5206\u6790\u6587\u672c [TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'}}},\n{opcode:'getCurrentSeason',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u5f53\u524d\u5b63\u8282'},\n{opcode:'isLeapYear',blockType:Scratch.BlockType.BOOLEAN,text:'[YEAR] \u662f\u5426\u4e3a\u95f0\u5e74',arguments:{YEAR:{type:Scratch.ArgumentType.NUMBER,defaultValue:2024}}},\n{opcode:'getURLParameters',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6URL\u53c2\u6570'},\n{opcode:'setLocalStorage',blockType:Scratch.BlockType.COMMAND,text:'\u672c\u5730\u5b58\u50a8 [KEY] [VALUE]',arguments:{KEY:{type:Scratch.ArgumentType.STRING,defaultValue:'key'},VALUE:{type:Scratch.ArgumentType.STRING,defaultValue:'value'}}},\n{opcode:'getLocalStorage',blockType:Scratch.BlockType.REPORTER,text:'\u8bfb\u53d6\u672c\u5730\u5b58\u50a8 [KEY]',arguments:{KEY:{type:Scratch.ArgumentType.STRING,defaultValue:'key'}}},\n{opcode:'removeLocalStorage',blockType:Scratch.BlockType.COMMAND,text:'\u5220\u9664\u672c\u5730\u5b58\u50a8 [KEY]',arguments:{KEY:{type:Scratch.ArgumentType.STRING,defaultValue:'key'}}},\n{opcode:'clearLocalStorage',blockType:Scratch.BlockType.COMMAND,text:'\u6e05\u7a7a\u672c\u5730\u5b58\u50a8'},\n{opcode:'getPerformanceMetrics',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u6027\u80fd\u6307\u6807'},\n{opcode:'detectAdBlocker',blockType:Scratch.BlockType.BOOLEAN,text:'\u662f\u5426\u542f\u7528\u5e7f\u544a\u62e6\u622a\u5668'},\n{opcode:'getPageVisibility',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u9875\u9762\u53ef\u89c1\u72b6\u6001'},\n{opcode:'createBlobURL',blockType:Scratch.BlockType.REPORTER,text:'\u521b\u5efaBlob URL \u5185\u5bb9:[CONTENT] \u7c7b\u578b:[TYPE]',arguments:{CONTENT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'},TYPE:{type:Scratch.ArgumentType.STRING,defaultValue:'text/plain'}}},\n{opcode:'revokeBlobURL',blockType:Scratch.BlockType.COMMAND,text:'\u64a4\u9500Blob URL [URL]',arguments:{URL:{type:Scratch.ArgumentType.STRING,defaultValue:'blob:https://example.com'}}},\n{opcode:'getElementCount',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u9875\u9762\u5143\u7d20\u6570\u91cf [SELECTOR]',arguments:{SELECTOR:{type:Scratch.ArgumentType.STRING,defaultValue:'div'}}},\n{opcode:'checkFontSupport',blockType:Scratch.BlockType.REPORTER,text:'\u68c0\u67e5\u5b57\u4f53\u652f\u6301 [FONT]',arguments:{FONT:{type:Scratch.ArgumentType.STRING,defaultValue:'Arial'}}},\n{opcode:'getCSSVariable',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6CSS\u53d8\u91cf\u503c [VAR_NAME]',arguments:{VAR_NAME:{type:Scratch.ArgumentType.STRING,defaultValue:'--main-color'}}},\n{opcode:'setCSSVariable',blockType:Scratch.BlockType.COMMAND,text:'\u8bbe\u7f6eCSS\u53d8\u91cf [VAR_NAME] [VALUE]',arguments:{VAR_NAME:{type:Scratch.ArgumentType.STRING,defaultValue:'--main-color'},VALUE:{type:Scratch.ArgumentType.STRING,defaultValue:'#5ca05c'}}},\n{opcode:'createObjectURL',blockType:Scratch.BlockType.REPORTER,text:'\u521b\u5efa\u5bf9\u8c61URL \u6587\u4ef6:[FILE]',arguments:{FILE:{type:Scratch.ArgumentType.STRING,defaultValue:'data:text/plain,Hello'}}},\n{opcode:'measureTextWidth',blockType:Scratch.BlockType.REPORTER,text:'\u6d4b\u91cf\u6587\u672c\u5bbd\u5ea6 [TEXT] \u5b57\u4f53:[FONT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'},FONT:{type:Scratch.ArgumentType.STRING,defaultValue:'16px Arial'}}},\n{opcode:'getScrollbarWidth',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u6eda\u52a8\u6761\u5bbd\u5ea6'},\n{opcode:'isReduceMotionEnabled',blockType:Scratch.BlockType.BOOLEAN,text:'\u662f\u5426\u542f\u7528\u51cf\u5c11\u52a8\u753b'},\n{opcode:'detectIncognitoMode',blockType:Scratch.BlockType.BOOLEAN,text:'\u662f\u5426\u5904\u4e8e\u65e0\u75d5\u6a21\u5f0f'},\n{opcode:'getDeviceMotion',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u8bbe\u5907\u52a0\u901f\u5ea6'},\n{opcode:'createHash',blockType:Scratch.BlockType.REPORTER,text:'\u751f\u6210\u54c8\u5e0c\u503c [ALGORITHM] [TEXT]',arguments:{ALGORITHM:{type:Scratch.ArgumentType.STRING,menu:'hashMenu',defaultValue:'MD5'},TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'}}},\n{opcode:'compressText',blockType:Scratch.BlockType.REPORTER,text:'\u538b\u7f29\u6587\u672c [TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'}}},\n{opcode:'decompressText',blockType:Scratch.BlockType.REPORTER,text:'\u89e3\u538b\u6587\u672c [TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'eJzzSM3JyVcIzy/KSVEEABK5A5A='}}},\n{opcode:'detectDarkPattern',blockType:Scratch.BlockType.BOOLEAN,text:'\u68c0\u6d4b\u6df1\u8272\u6a21\u5f0f\u504f\u597d'},\n{opcode:'getAudioContext',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u97f3\u9891\u4e0a\u4e0b\u6587\u72b6\u6001'},\n{opcode:'calculateTextReadTime',blockType:Scratch.BlockType.REPORTER,text:'\u8ba1\u7b97\u6587\u672c\u9605\u8bfb\u65f6\u95f4 [TEXT]',arguments:{TEXT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello World'}}},\n{opcode:'generateUUID',blockType:Scratch.BlockType.REPORTER,text:'\u751f\u6210UUID'},\n{opcode:'checkImageExists',blockType:Scratch.BlockType.BOOLEAN,text:'\u68c0\u67e5\u56fe\u7247\u662f\u5426\u5b58\u5728 [URL]',arguments:{URL:{type:Scratch.ArgumentType.STRING,defaultValue:'https://example.com/image.jpg'}}},\n{opcode:'getCookieValue',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6Cookie\u503c [NAME]',arguments:{NAME:{type:Scratch.ArgumentType.STRING,defaultValue:'session'}}},\n{opcode:'setCookieValue',blockType:Scratch.BlockType.COMMAND,text:'\u8bbe\u7f6eCookie [NAME] [VALUE] [DAYS]',arguments:{NAME:{type:Scratch.ArgumentType.STRING,defaultValue:'session'},VALUE:{type:Scratch.ArgumentType.STRING,defaultValue:'value'},DAYS:{type:Scratch.ArgumentType.NUMBER,defaultValue:7}}},\n{opcode:'getBatteryStatus',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u7535\u6c60\u72b6\u6001\u8be6\u60c5'},\n{opcode:'detectIdleState',blockType:Scratch.BlockType.REPORTER,text:'\u68c0\u6d4b\u7528\u6237\u7a7a\u95f2\u72b6\u6001'},\n{opcode:'calculateDistance',blockType:Scratch.BlockType.REPORTER,text:'\u8ba1\u7b97\u4e24\u70b9\u8ddd\u79bb \u70b91:[POINT1] \u70b92:[POINT2]',arguments:{POINT1:{type:Scratch.ArgumentType.STRING,defaultValue:'0,0'},POINT2:{type:Scratch.ArgumentType.STRING,defaultValue:'3,4'}}},\n{opcode:'generateLoremIpsum',blockType:Scratch.BlockType.REPORTER,text:'\u751f\u6210Lorem Ipsum\u6587\u672c [WORDS]\u8bcd',arguments:{WORDS:{type:Scratch.ArgumentType.NUMBER,defaultValue:50}}},\n{opcode:'checkSSLStatus',blockType:Scratch.BlockType.BOOLEAN,text:'\u5f53\u524d\u9875\u9762\u662f\u5426\u4f7f\u7528HTTPS'},\n{opcode:'getPageLoadSize',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u9875\u9762\u52a0\u8f7d\u8d44\u6e90\u5927\u5c0f'},\n{opcode:'detectPrintSupport',blockType:Scratch.BlockType.BOOLEAN,text:'\u662f\u5426\u652f\u6301\u6253\u5370\u529f\u80fd'},\n{opcode:'createDataURL',blockType:Scratch.BlockType.REPORTER,text:'\u521b\u5efaData URL \u5185\u5bb9:[CONTENT] \u7c7b\u578b:[TYPE]',arguments:{CONTENT:{type:Scratch.ArgumentType.STRING,defaultValue:'Hello'},TYPE:{type:Scratch.ArgumentType.STRING,defaultValue:'text/plain'}}},\n{opcode:'getActiveElement',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u5f53\u524d\u7126\u70b9\u5143\u7d20'},\n{opcode:'checkWebGLSupport',blockType:Scratch.BlockType.BOOLEAN,text:'\u662f\u5426\u652f\u6301WebGL'},\n{opcode:'getSelectionText',blockType:Scratch.BlockType.REPORTER,text:'\u83b7\u53d6\u9009\u4e2d\u6587\u672c'},\n{opcode:'detectPointerType',blockType:Scratch.BlockType.REPORTER,text:'\u68c0\u6d4b\u6307\u9488\u8bbe\u5907\u7c7b\u578b'},\n{opcode:'calculateAspectRatio',blockType:Scratch.BlockType.REPORTER,text:'\u8ba1\u7b97\u5bbd\u9ad8\u6bd4 \u5bbd:[WIDTH] \u9ad8:[HEIGHT]',arguments:{WIDTH:{type:Scratch.ArgumentType.NUMBER,defaultValue:16},HEIGHT:{type:Scratch.ArgumentType.NUMBER,defaultValue:9}}},\n{opcode:'generateGradient',blockType:Scratch.BlockType.REPORTER,text:'\u751f\u6210CSS\u6e10\u53d8 [COLOR1] [COLOR2]',arguments:{COLOR1:{type:Scratch.ArgumentType.STRING,defaultValue:'#FF0000'},COLOR2:{type:Scratch.ArgumentType.STRING,defaultValue:'#0000FF'}}},\n{opcode:'checkServiceWorker',blockType:Scratch.BlockType.BOOLEAN,text:'\u662f\u5426\u6ce8\u518cService Worker'}],\nmenus:{\nbase64Menu:{items:['\u7f16\u7801','\u89e3\u7801']},\nhashMenu:{items:['MD5','SHA-1','SHA-256','SHA-512']}\n},\ndocsURI:'https://ccwmoran.github.io'}}\n\ngetDeviceModel(){let e=navigator.userAgent;return/iPhone/.test(e)?'iPhone':/iPad/.test(e)?'iPad':/Android/.test(e)?'Android\u8bbe\u5907':/Windows/.test(e)?'Windows\u7535\u8111':/Mac/.test(e)?'Mac\u7535\u8111':/Linux/.test(e)?'Linux\u7535\u8111':'\u672a\u77e5\u8bbe\u5907'}\ngetBrowserName(){let e=navigator.userAgent;return e.indexOf('Chrome')>-1&&e.indexOf('Edge')===-1?'Chrome':e.indexOf('Firefox')>-1?'Firefox':e.indexOf('Safari')>-1&&e.indexOf('Chrome')===-1?'Safari':e.indexOf('Edge')>-1?'Edge':e.indexOf('Opera')>-1?'Opera':e.indexOf('MSIE')>-1||e.indexOf('Trident')>-1?'Internet Explorer':'\u672a\u77e5\u6d4f\u89c8\u5668'}\ntoggleFullscreen(){if(!document.fullscreenElement){document.documentElement.requestFullscreen?.()||document.documentElement.mozRequestFullScreen?.()||document.documentElement.webkitRequestFullscreen?.()||document.documentElement.msRequestFullscreen?.()}else{document.exitFullscreen?.()||document.mozCancelFullScreen?.()||document.webkitExitFullscreen?.()||document.msExitFullscreen?.()}}\nisTouchSupported(){return'ontouchstart'in window||navigator.maxTouchPoints>0}\ngenerateRandomColor(){let e='0123456789ABCDEF',t='#';for(let o=0;o<6;o++)t+=e[Math.floor(Math.random()*16)];return t}\ngenerateRandomInt(e){let t=e.DIGITS,o=Math.pow(10,t-1),n=Math.pow(10,t)-1;return Math.floor(Math.random()*(n-o+1))+o}\nisOnline(){return navigator.onLine}\nisInEditor(){return window.location.href.indexOf('scratch.mit.edu')>-1&&window.location.href.indexOf('/projects/')>-1}\nhasCamera(){return new Promise(e=>{navigator.mediaDevices?.enumerateDevices?.().then(t=>{e(t.some(e=>e.kind==='videoinput'))}).catch(()=>e(false))})}\ngetCurrentDate(){let e=new Date();return e.getFullYear()+'-'+String(e.getMonth()+1).padStart(2,'0')+'-'+String(e.getDate()).padStart(2,'0')}\ngetCurrentTime(){let e=new Date();return String(e.getHours()).padStart(2,'0')+':'+String(e.getMinutes()).padStart(2,'0')+':'+String(e.getSeconds()).padStart(2,'0')}\ngetWeekday(){return['\u661f\u671f\u65e5','\u661f\u671f\u4e00','\u661f\u671f\u4e8c','\u661f\u671f\u4e09','\u661f\u671f\u56db','\u661f\u671f\u4e94','\u661f\u671f\u516d'][new Date().getDay()]}\nshowAlert(e){alert(e.TEXT)}\nshowPrompt(e){return prompt(e.QUESTION)}\nshowOptions(e){let t=e.OPTIONS.split(','),o='<div style='font-family:Arial,sans-serif;padding:10px;'><p style='margin-top:0;'>\u8bf7\u9009\u62e9\u4e00\u4e2a\u9009\u9879:</p>';t.forEach((e,n)=>{o+=`<label style='display:block;margin:5px 0;'><input type='radio' name='option' value='${e}' ${0===n?'checked':''}>${e}</label>`});o+='</div>';let n=this.showCustomDialog('\u9009\u62e9\u9009\u9879',o);return n||t[0]||''}\nshowDatePicker(){let e=document.createElement('input');e.type='date',e.showPicker();return e.value||new Date().toISOString().slice(0,10)}\nshowColorPicker(){let e=document.createElement('input');e.type='color',e.showPicker();return e.value||'#000000'}\nshowCustomDialog(e,t,o=!1){return new Promise(n=>{let c=document.createElement('div');c.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;justify-content:center;align-items:center;z-index:10000';let r=document.createElement('div');r.style.cssText='background:white;border-radius:8px;padding:0;min-width:300px;max-width:90%;box-shadow:0 4px 20px rgba(0,0,0,0.3)';let i=document.createElement('div');i.style.cssText='background:#5ca05c;color:white;padding:10px 15px;border-radius:8px 8px 0 0;font-weight:bold';i.textContent=e;let a=document.createElement('div');a.innerHTML=t;let l=document.createElement('div');l.style.cssText='display:flex;justify-content:flex-end;padding:10px 15px;border-top:1px solid #eee';let s=document.createElement('button');s.textContent='\u53d6\u6d88',s.style.cssText='margin-right:10px;padding:5px 15px;background:#f0f0f0;border:1px solid #ccc;border-radius:4px;cursor:pointer';let d=document.createElement('button');d.textContent='\u786e\u5b9a',d.style.cssText='padding:5px 15px;background:#5ca05c;color:white;border:none;border-radius:4px;cursor:pointer';l.appendChild(s),l.appendChild(d),r.appendChild(i),r.appendChild(a),r.appendChild(l),c.appendChild(r),document.body.appendChild(c);let u=t=>{document.body.removeChild(c),n(t)};s.onclick=()=>u(null),d.onclick=()=>{let e=o?a.querySelector('input')?.value:a.querySelector('input[name='option']:checked')?.value;u(e)},c.onclick=e=>{e.target===c&&u(null)}})}\ngetCurrentURL(){return window.location.href}\ngetCurrentTitle(){return document.title}\nopenInNewTab(e){window.open(e.URL,'_blank')}\nsetPageTitle(e){document.title=e.TITLE}\nrefreshPage(){window.location.reload()}\ncopyToClipboard(e){let t=document.createElement('textarea');t.value=e.TEXT,document.body.appendChild(t),t.select();try{document.execCommand('copy')}catch(e){}document.body.removeChild(t)}\nbase64Operation(e){let t=e.OPERATION,o=e.CONTENT;try{return'\u7f16\u7801'===t?btoa(unescape(encodeURIComponent(o))):decodeURIComponent(escape(atob(o)))}catch(e){return'\u7f16\u7801'===t?'\u7f16\u7801\u5931\u8d25':'\u89e3\u7801\u5931\u8d25'}}\ngetLocationInfo(){return new Promise(e=>{fetch('https://ipapi.co/json/').then(t=>t.json()).then(t=>{e(t.country_name&&t.region&&t.city?`${t.country_name}-${t.region}-${t.city}`:'\u4f4d\u7f6e\u4fe1\u606f\u4e0d\u53ef\u7528')}).catch(()=>e('\u4f4d\u7f6e\u670d\u52a1\u6682\u65f6\u4e0d\u53ef\u7528'))})}\ndownloadFile(e){let t=e.CONTENT,o=e.FILENAME,n=new Blob([t],{type:'text/plain;charset=utf-8'}),c=URL.createObjectURL(n),r=document.createElement('a');r.href=c,r.download=o,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(c)}\ncalculateDaysBetween(e){let t=e.START,o=e.END,n=new Date(t.replace(/\\./g,'/')),c=new Date(o.replace(/\\./g,'/'));if(isNaN(n)||isNaN(c))return'\u65e5\u671f\u683c\u5f0f\u9519\u8bef';let r=Math.abs(c-n),i=Math.ceil(r/(1e3*60*60*24));return i}\ncloseCurrentPage(){window.close()}\ngenerateRandomEmojis(e){let t=e.COUNT,o=['\ud83d\ude00','\ud83d\ude02','\ud83e\udd70','\ud83d\ude0e','\ud83e\udd29','\ud83d\ude0d','\ud83e\udd17','\ud83d\ude42','\ud83d\ude0a','\ud83d\ude07','\ud83e\udd73','\ud83d\ude1c','\ud83e\udd2a','\ud83d\ude0b','\ud83d\ude1b','\ud83d\udc4f','\ud83d\udc4d','\u2764\ufe0f','\ud83d\udd25','\u2b50','\ud83c\udf08','\ud83c\udf89','\ud83c\udf81','\ud83c\udf82','\ud83c\udf88','\ud83d\udcaf','\u2728','\ud83c\udf1f','\ud83d\udcab','\ud83d\udca5','\ud83d\udc96','\ud83d\udc95','\ud83d\udc9e','\ud83d\udc93','\ud83d\udc97','\ud83d\udd25','\ud83c\udf1f','\ud83d\udcab','\u2b50','\ud83c\udf08','\ud83c\udf1e','\ud83c\udf3b','\ud83c\udf38','\ud83c\udf3a','\ud83c\udf40','\ud83c\udfb5','\ud83c\udfb6','\ud83c\udfa8','\ud83c\udfc6','\ud83c\udfae','\ud83c\udfaf','\u26bd','\ud83c\udfc0','\ud83c\udfbe','\ud83c\udfd0','\ud83c\udfb1'],n='';for(let e=0;e<t;e++)n+=o[Math.floor(Math.random()*o.length)];return n}\nrunHTMLCode(e){try{let t=document.createElement('div');t.innerHTML=e.HTML_CODE,document.body.appendChild(t)}catch(e){}}\ngetBatteryLevel(){return new Promise(e=>{if(navigator.getBattery){navigator.getBattery().then(t=>{e(Math.round(t.level*100)+'%')}).catch(()=>e('\u672a\u77e5'))}else{e('\u4e0d\u652f\u6301\u7535\u6c60API')}})}\nvibrateDevice(e){if(navigator.vibrate){navigator.vibrate(e.DURATION)}}\nshareContent(e){if(navigator.share){navigator.share({title:document.title,text:e.TEXT,url:e.URL}).catch(()=>{})}}\ngetScreenResolution(){return screen.width+'\u00d7'+screen.height}\ncheckNetworkSpeed(){return new Promise(e=>{let t=performance.getEntriesByType('navigation');if(t.length>0){let o=t[0];if(o.domainLookupEnd&&o.connectEnd&&o.responseEnd&&o.requestStart){let n=o.domainLookupEnd-o.domainLookupStart,c=o.connectEnd-o.connectStart,r=o.responseEnd-o.requestStart;e(`DNS:${n.toFixed(2)}ms \u8fde\u63a5:${c.toFixed(2)}ms \u54cd\u5e94:${r.toFixed(2)}ms`)}else{e('\u65e0\u6cd5\u83b7\u53d6\u7f51\u7edc\u901f\u5ea6\u8be6\u60c5')}}else{e('\u7f51\u7edc\u4fe1\u606f\u4e0d\u53ef\u7528')}})}\ngetClipboardText(){return new Promise(e=>{navigator.clipboard?.readText?.().then(t=>e(t)).catch(()=>e('\u65e0\u6cd5\u8bfb\u53d6\u526a\u8d34\u677f'))})}\ntakeScreenshot(){html2canvas(document.body).then(e=>{let t=e.toDataURL('image/png'),o=document.createElement('a');o.href=t,o.download='screenshot.png',o.click()})}\ngetSystemTheme(){return window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches?'\u6df1\u8272\u6a21\u5f0f':'\u6d45\u8272\u6a21\u5f0f'}\ngetUserLanguage(){return navigator.language||navigator.userLanguage||'\u672a\u77e5'}\ngetCPUInfo(){return navigator.hardwareConcurrency?navigator.hardwareConcurrency+'\u6838\u5fc3':'\u672a\u77e5'}\nisCookieEnabled(){return navigator.cookieEnabled}\ngetPageFavicon(){let e=document.querySelector('link[rel*='icon']');return e?e.href:'\u65e0\u56fe\u6807'}\ngetMemoryInfo(){return navigator.deviceMemory?navigator.deviceMemory+'GB':'\u672a\u77e5'}\ngetUserAgent(){return navigator.userAgent}\ngetViewportSize(){return window.innerWidth+'\u00d7'+window.innerHeight}\nisJavaScriptEnabled(){return true}\ngetPlatformInfo(){return navigator.platform||'\u672a\u77e5\u5e73\u53f0'}\ngetConnectionType(){let e=navigator.connection;return e?e.effectiveType||'\u672a\u77e5':'\u672a\u77e5'}\ngetPageLoadTime(){let e=performance.timing;return e.loadEventEnd-e.navigationStart+'ms'}\ngetScrollPosition(){return window.pageYOffset+'px'}\nisDoNotTrackEnabled(){return navigator.doNotTrack===1||navigator.doNotTrack==='1'||navigator.msDoNotTrack==='1'||window.doNotTrack==='1'}\ngetReferrer(){return document.referrer||'\u65e0\u6765\u6e90\u9875\u9762'}\ngetTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}\ngetDeviceOrientation(){return new Promise(e=>{if(window.DeviceOrientationEvent){window.addEventListener('deviceorientation',t=>{e(`Alpha:${t.alpha?.toFixed(2)} Beta:${t.beta?.toFixed(2)} Gamma:${t.gamma?.toFixed(2)}`)},{once:!0})}else{e('\u4e0d\u652f\u6301\u8bbe\u5907\u65b9\u5411\u68c0\u6d4b')}})}\ngetNetworkLatency(){return new Promise(e=>{let t=performance.now();fetch('https://www.google.com/favicon.ico?t='+Date.now(),{mode:'no-cors',cache:'no-cache'}).then(()=>{e((performance.now()-t).toFixed(2)+'ms')}).catch(()=>e('\u68c0\u6d4b\u5931\u8d25'))})}\ngetStorageUsage(){return new Promise(e=>{if(navigator.storage&&navigator.storage.estimate){navigator.storage.estimate().then(t=>{let o=(t.usage/1024/1024).toFixed(2),n=(t.quota/1024/1024).toFixed(2);e(`\u5df2\u7528:${o}MB \u603b\u989d:${n}MB`)}).catch(()=>e('\u5b58\u50a8\u4fe1\u606f\u4e0d\u53ef\u7528'))}else{e('\u4e0d\u652f\u6301\u5b58\u50a8API')}})}\nisPWAInstalled(){return window.matchMedia('(display-mode: standalone)').matches||window.navigator.standalone||document.referrer.includes('android-app://')}\ngetMediaDevices(){return new Promise(e=>{navigator.mediaDevices?.enumerateDevices?.().then(t=>{let o=t.map(t=>`${t.kind}:${t.label||'\u672a\u77e5'}`).join('; ');e(o||'\u65e0\u5a92\u4f53\u8bbe\u5907')}).catch(()=>e('\u65e0\u6cd5\u83b7\u53d6\u8bbe\u5907\u5217\u8868'))})}\ncreateQRCode(e){return`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(e.TEXT)}`}\nspeakText(e){if('speechSynthesis'in window){let t=new SpeechSynthesisUtterance(e.TEXT);speechSynthesis.speak(t)}}\nstopSpeaking(){speechSynthesis.cancel()}\ngetGeolocation(){return new Promise(e=>{if('geolocation'in navigator){navigator.geolocation.getCurrentPosition(t=>{e(`\u7eac\u5ea6:${t.coords.latitude.toFixed(6)} \u7ecf\u5ea6:${t.coords.longitude.toFixed(6)}`)},()=>e('\u4f4d\u7f6e\u83b7\u53d6\u5931\u8d25'))}else{e('\u4e0d\u652f\u6301\u5730\u7406\u4f4d\u7f6e')}})}\ngetSunriseSunset(){return new Promise(e=>{fetch('https://api.sunrise-sunset.org/json?lat=36.7201600&lng=-4.4203400&formatted=0').then(t=>t.json()).then(t=>{t.results?e(`\u65e5\u51fa:${t.results.sunrise} \u65e5\u843d:${t.results.sunset}`):e('\u6570\u636e\u83b7\u53d6\u5931\u8d25')}).catch(()=>e('\u670d\u52a1\u4e0d\u53ef\u7528'))})}\ncalculateAge(e){let t=new Date(e.BIRTHDAY.replace(/\\./g,'/')),o=new Date(),n=o.getFullYear()-t.getFullYear(),c=o.getMonth()-t.getMonth();return c<0||0===c&&o.getDate()<t.getDate()?n-1:n}\ncountdownTimer(e){let t=new Date(e.TARGET_TIME),o=new Date(),n=t-o;return n<=0?'\u65f6\u95f4\u5df2\u5230':`${Math.floor(n/(1e3*60*60*24))}\u5929${Math.floor(n%(1e3*60*60*24)/(1e3*60*60))}\u5c0f\u65f6${Math.floor(n%(1e3*60*60)/(1e3*60))}\u5206\u949f`}\ngetMoonPhase(){let e=new Date(),t=e.getDate(),o=e.getMonth()+1,n=e.getFullYear(),c=(n%100+Math.floor((n%100)/4))%7;return['\u65b0\u6708','\u5a25\u7709\u6708','\u4e0a\u5f26\u6708','\u76c8\u51f8\u6708','\u6ee1\u6708','\u4e8f\u51f8\u6708','\u4e0b\u5f26\u6708','\u6b8b\u6708'][Math.floor(t%8)]}\ngeneratePassword(e){let t=e.LENGTH,o='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*',n='';for(let e=0;e<t;e++)n+=o[Math.floor(Math.random()*o.length)];return n}\nanalyzeText(e){let t=e.TEXT,o=t.length,n=t.split(/\\s+/).length,c=t.split(/[.!?]+/).length-1;return`\u5b57\u7b26\u6570:${o} \u5355\u8bcd\u6570:${n} \u53e5\u5b50\u6570:${c}`}\ngetCurrentSeason(){let e=new Date(),t=e.getMonth();return t>=2&&t<=4?'\u6625\u5b63':t>=5&&t<=7?'\u590f\u5b63':t>=8&&t<=10?'\u79cb\u5b63':'\u51ac\u5b63'}\nisLeapYear(e){let t=e.YEAR;return t%4==0&&t%100!=0||t%400==0}\ngetURLParameters(){let e=new URLSearchParams(window.location.search),t=[];for(let o of e.entries())t.push(`${o[0]}=${o[1]}`);return t.join(', ')}\nsetLocalStorage(e){localStorage.setItem(e.KEY,e.VALUE)}\ngetLocalStorage(e){return localStorage.getItem(e.KEY)||''}\nremoveLocalStorage(e){localStorage.removeItem(e.KEY)}\nclearLocalStorage(){localStorage.clear()}\ngetPerformanceMetrics(){let e=performance.getEntriesByType('navigation')[0];if(e){let t=e.domContentLoadedEventEnd-e.navigationStart,o=e.loadEventEnd-e.navigationStart;return`DOM\u52a0\u8f7d:${t}ms \u5b8c\u5168\u52a0\u8f7d:${o}ms`}return'\u6027\u80fd\u6570\u636e\u4e0d\u53ef\u7528'}\ndetectAdBlocker(){return new Promise(e=>{fetch('https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js',{method:'HEAD',mode:'no-cors'}).then(()=>e(false)).catch(()=>e(true))})}\ngetPageVisibility(){return document.hidden?'\u9875\u9762\u9690\u85cf':'\u9875\u9762\u53ef\u89c1'}\ncreateBlobURL(e){let t=new Blob([e.CONTENT],{type:e.TYPE});return URL.createObjectURL(t)}\nrevokeBlobURL(e){URL.revokeObjectURL(e.URL)}\ngetElementCount(e){return document.querySelectorAll(e.SELECTOR).length}\ncheckFontSupport(e){let t=document.createElement('span');t.style.fontFamily=e.FONT,t.style.position='absolute',t.style.left='-9999px',t.innerHTML='mmmmmmmmmmmmmmmm';document.body.appendChild(t);let o=t.offsetWidth;document.body.removeChild(t);let n=document.createElement('span');n.style.fontFamily='monospace',n.style.position='absolute',n.style.left='-9999px',n.innerHTML='mmmmmmmmmmmmmmmm';document.body.appendChild(n);let c=n.offsetWidth;return document.body.removeChild(n),o!==c}\ngetCSSVariable(e){return getComputedStyle(document.documentElement).getPropertyValue(e.VAR_NAME).trim()}\nsetCSSVariable(e){document.documentElement.style.setProperty(e.VAR_NAME,e.VALUE)}\ncreateObjectURL(e){let t=new Blob([e.FILE],{type:'text/plain'});return URL.createObjectURL(t)}\nmeasureTextWidth(e){let t=document.createElement('canvas'),o=t.getContext('2d');return o.font=e.FONT,Math.ceil(o.measureText(e.TEXT).width)}\ngetScrollbarWidth(){let e=document.createElement('div');e.style.overflow='scroll',e.style.width='50px',e.style.height='50px',e.style.visibility='hidden',e.style.position='absolute',e.style.top='-9999px';document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}\nisReduceMotionEnabled(){return window.matchMedia('(prefers-reduced-motion: reduce)').matches}\ndetectIncognitoMode(){return new Promise(e=>{let t=!1;'storage'in navigator&&navigator.storage.estimate?navigator.storage.estimate().then(o=>{t=o.quota<12e9}).catch(()=>t=!1):t=!1,e(t)})}\ngetDeviceMotion(){return new Promise(e=>{if(window.DeviceMotionEvent){window.addEventListener('devicemotion',t=>{e(`X:${t.acceleration?.x?.toFixed(2)} Y:${t.acceleration?.y?.toFixed(2)} Z:${t.acceleration?.z?.toFixed(2)}`)},{once:!0})}else{e('\u4e0d\u652f\u6301\u8bbe\u5907\u8fd0\u52a8\u68c0\u6d4b')}})}\ncreateHash(e){let t=e.ALGORITHM,o=e.TEXT,n=0;for(let e=0;e<o.length;e++)n=((n<<5)-n)+o.charCodeAt(e),n&=n;return'MD5'===t?(n>>>0).toString(16):'SHA-1'===t?(n+2147483648).toString(16):'SHA-256'===t?(n*2654435761>>>0).toString(16):(n^123456789).toString(16)}\ncompressText(e){try{return btoa(encodeURIComponent(e.TEXT).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode('0x'+t)))}catch(e){return'\u538b\u7f29\u5931\u8d25'}}\ndecompressText(e){try{return decodeURIComponent(atob(e.TEXT).split('').map(e=>'%'+('00'+e.charCodeAt(0).toString(16)).slice(-2)).join(''))}catch(e){return'\u89e3\u538b\u5931\u8d25'}}\ndetectDarkPattern(){return window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches?'\u6df1\u8272\u6a21\u5f0f':'\u6d45\u8272\u6a21\u5f0f'}\ngetAudioContext(){return'undefined'!=typeof AudioContext?'\u97f3\u9891\u4e0a\u4e0b\u6587\u53ef\u7528':'\u97f3\u9891\u4e0a\u4e0b\u6587\u4e0d\u53ef\u7528'}\ncalculateTextReadTime(e){let t=e.TEXT.length;return Math.ceil(t/200)+'\u5206\u949f'}\ngenerateUUID(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,e=>{let t=16*Math.random()|0;return('x'===e?t:3&t|8).toString(16)})}\ncheckImageExists(e){return new Promise(t=>{let o=new Image;o.onload=()=>t(!0),o.onerror=()=>t(!1),o.src=e.URL})}\ngetCookieValue(e){let t=`; ${document.cookie}`,o=t.split(`; ${e.NAME}=`);return 2===o.length?o.pop().split(';').shift():''}\nsetCookieValue(e){let t=e.NAME,o=e.VALUE,n=e.DAYS,c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3);let r='expires='+c.toUTCString();document.cookie=t+'='+o+';'+r+';path=/'}\ngetBatteryStatus(){return new Promise(e=>{if(navigator.getBattery){navigator.getBattery().then(t=>{e(`\u7535\u91cf:${Math.round(t.level*100)}% \u5145\u7535\u4e2d:${t.charging?'\u662f':'\u5426'} \u5145\u7535\u65f6\u95f4:${t.chargingTime?Math.round(t.chargingTime/60)+'\u5206\u949f':'\u672a\u77e5'} \u653e\u7535\u65f6\u95f4:${t.dischargingTime?Math.round(t.dischargingTime/60)+'\u5206\u949f':'\u672a\u77e5'}`)}).catch(()=>e('\u7535\u6c60\u72b6\u6001\u672a\u77e5'))}else{e('\u4e0d\u652f\u6301\u7535\u6c60API')}})}\ndetectIdleState(){return new Promise(e=>{if('requestIdleCallback'in window){let t=performance.now();window.requestIdleCallback(()=>{e(`\u7a7a\u95f2\u65f6\u95f4:${Math.round(performance.now()-t)}ms`)})}else{e('\u4e0d\u652f\u6301\u7a7a\u95f2\u68c0\u6d4b')}})}\ncalculateDistance(e){let t=e.POINT1.split(',').map(Number),o=e.POINT2.split(',').map(Number);if(t.length!==2||o.length!==2||t.some(isNaN)||o.some(isNaN))return'\u5750\u6807\u683c\u5f0f\u9519\u8bef';let n=t[0]-o[0],c=t[1]-o[1];return Math.sqrt(n*n+c*c).toFixed(2)}\ngenerateLoremIpsum(e){let t=e.WORDS,o=['lorem','ipsum','dolor','sit','amet','consectetur','adipiscing','elit','sed','do','eiusmod','tempor','incididunt','ut','labore','et','dolore','magna','aliqua','enim','minim','veniam','quis','nostrud','exercitation','ullamco','laboris','nisi','aliquip','ex','ea','commodo','consequat','duis','aute','irure','in','reprehenderit','voluptate','velit','esse','cillum','eu','fugiat','nulla','pariatur','excepteur','sint','occaecat','cupidatat','non','proident','sunt','culpa','qui','officia','deserunt','mollit','anim','id','est','laborum'],n='';for(let e=0;e<t;e++)n+=(e>0?' ':'')+o[Math.floor(Math.random()*o.length)];return n+'.'}\ncheckSSLStatus(){return window.location.protocol==='https:'}\ngetPageLoadSize(){let e=performance.getEntriesByType('resource').reduce((e,t)=>e+t.transferSize||0,0);return(e/1024).toFixed(2)+'KB'}\ndetectPrintSupport(){return!!window.matchMedia&&!!window.matchMedia('print')}\ncreateDataURL(e){return`data:${e.TYPE},${encodeURIComponent(e.CONTENT)}`}\ngetActiveElement(){let e=document.activeElement;return e?e.tagName+ (e.id?'#'+e.id:'')+ (e.className?'.'+e.className.split(' ')[0]:''):'\u65e0\u7126\u70b9\u5143\u7d20'}\ncheckWebGLSupport(){let e=document.createElement('canvas');return!!(e.getContext('webgl')||e.getContext('experimental-webgl'))}\ngetSelectionText(){let e=window.getSelection();return e?e.toString():'\u65e0\u9009\u4e2d\u6587\u672c'}\ndetectPointerType(){return window.matchMedia&&window.matchMedia('(pointer:coarse)').matches?'\u89e6\u6478\u8bbe\u5907':window.matchMedia&&window.matchMedia('(pointer:fine)').matches?'\u9f20\u6807\u8bbe\u5907':'\u672a\u77e5\u6307\u9488\u8bbe\u5907'}\ncalculateAspectRatio(e){let t=e.WIDTH,o=e.HEIGHT;if(t<=0||o<=0)return'\u65e0\u6548\u5c3a\u5bf8';let n=this.gcd(t,o);return`${t/n}:${o/n}`}\ngcd(e,t){return t===0?e:this.gcd(t,e%t)}\ngenerateGradient(e){return`linear-gradient(45deg, ${e.COLOR1}, ${e.COLOR2})`}\ncheckServiceWorker(){return'navigator' in window&&'serviceWorker' in navigator?!!navigator.serviceWorker.controller:'\u4e0d\u652f\u6301Service Worker'}}\n\nScratch.extensions.register(new MorganToolboxV8());\n```\n\u3002", "top": 0, "createdAt": 1764494836, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P2": {"htmlDir": "docs/post/mu-ran-ke-ji-de-she-qu-dan-chuang.html", "labels": ["\u9002\u914dGandiIDE"], "postTitle": "\u6155\u7136\u79d1\u6280\u7684\u793e\u533a\u5f39\u7a97", "postUrl": "post/mu-ran-ke-ji-de-she-qu-dan-chuang.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/2", "commentNum": 0, "wordCount": 16187, "description": "```\n//\u5f39\u7a97\u6837\u5f0f\u4ee3\u7801\u6765\u81eaChen-Jin\u7684\u793e\u533a\u5f39\u7a97\u6269\u5c55\n//\u5f39\u7a97\u79ef\u6728\u548c\u529f\u80fd\u7b49\u7531Morgan\u5236\u4f5c\n//\u4ec5CCW\u5171\u521b\u4e16\u754c\u4e2d\u53ef\u7528\u5f39\u7a97\uff08\u5176\u4ed6\u672a\u77e5\uff09\nclass CommunityPopupExtension {\n    constructor() {\n        this.lastResult = null;\n        this.inputValue = '';\n    }\n\n    getInfo() {\n        return {\n            id: 'kjcxsqtc',\n            name: '\u6155\u7136\u79d1\u6280\u7684\u793e\u533a\u5f39\u7a97',\n            color: '#5cff6e',\n            docsURI: 'https://ccwmoran.github.io',\n            blocks: [\n                {\n                    opcode: 'showTextPopup',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u663e\u793a\u7eaf\u6587\u672c\u63d0\u793a \u6807\u9898 [TITLE] \u5185\u5bb9 [CONTENT] \u6309\u94ae\u663e\u793a [BUTTON_TYPE] \u79ef\u6781\u6309\u94ae [CONFIRM] \u6d88\u6781\u6309\u94ae [CANCEL]',\n                    arguments: {\n                        TITLE: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u63d0\u793a'\n                        },\n                        CONTENT: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u8fd9\u662f\u4e00\u4e2a\u7eaf\u6587\u672c\u63d0\u793a'\n                        },\n                        BUTTON_TYPE: {\n                            type: Scratch.ArgumentType.STRING,\n                            menu: 'buttonType',\n                            defaultValue: 'both'\n                        },\n                        CONFIRM: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u786e\u8ba4'\n                        },\n                        CANCEL: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u53d6\u6d88'\n                        }\n                    }\n                },\n                {\n                    opcode: 'showInputPopup',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u663e\u793a\u8f93\u5165\u6846\u63d0\u793a \u6807\u9898 [TITLE] \u63d0\u793a\u6587\u5b57 [HINT] \u9ed8\u8ba4\u503c [DEFAULT] \u79ef\u6781\u6309\u94ae [CONFIRM] \u6d88\u6781\u6309\u94ae [CANCEL]',\n                    arguments: {\n                        TITLE: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u8f93\u5165'\n                        },\n                        HINT: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u8bf7\u8f93\u5165\u5185\u5bb9'\n                        },\n                        DEFAULT: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: ''\n                        },\n                        CONFIRM: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u786e\u5b9a'\n                        },\n                        CANCEL: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u53d6\u6d88'\n                        }\n                    }\n                },\n                {\n                    opcode: 'showHighlightPopup',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u663e\u793a\u6587\u672c\u7a81\u51fa\u63d0\u793a \u6807\u9898 [TITLE] \u8bf4\u660e\u6587\u5b57 [DESC] \u7a81\u51fa\u6587\u672c [HIGHLIGHT] \u79ef\u6781\u6309\u94ae [COPY] \u6d88\u6781\u6309\u94ae [CANCEL]',\n                    arguments: {\n                        TITLE: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u6587\u672c\u7a81\u51fa'\n                        },\n                        DESC: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u4ee5\u4e0b\u662f\u9700\u8981\u7a81\u51fa\u7684\u6587\u672c\u5185\u5bb9'\n                        },\n                        HIGHLIGHT: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u7a81\u51fa\u663e\u793a\u7684\u6587\u672c'\n                        },\n                        COPY: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u590d\u5236'\n                        },\n                        CANCEL: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u53d6\u6d88'\n                        }\n                    }\n                },\n                {\n                    opcode: 'getLastResult',\n                    blockType: Scratch.BlockType.REPORTER,\n                    text: '\u5f39\u7a97\u7ed3\u679c',\n                    disableMonitor: true\n                },\n                {\n                    opcode: 'getInputValue',\n                    blockType: Scratch.BlockType.REPORTER,\n                    text: '\u8f93\u5165\u6846\u5185\u5bb9',\n                    disableMonitor: true\n                }\n            ],\n            menus: {\n                buttonType: {\n                    items: [\n                        {\n                            text: '\u90fd\u663e\u793a',\n                            value: 'both'\n                        },\n                        {\n                            text: '\u79ef\u6781\u6309\u94ae',\n                            value: 'positive'\n                        },\n                        {\n                            text: '\u6d88\u6781\u6309\u94ae',\n                            value: 'negative'\n                        }\n                    ]\n                }\n            }\n        };\n    }\n\n    // \u8f85\u52a9\u51fd\u6570\uff1a\u521b\u5efa\u5143\u7d20\n    ce(tag, text = undefined, pn = undefined, className = undefined, type = 't') {\n        var el = document.createElement(tag);\n        if (text) el[type == 'h' ? 'innerHTML' : 'innerText'] = text;\n        pn?.appendChild(el);\n        if (className) el.className = className;\n        return el;\n    }\n\n    parseMarkdownLinks(text) {\n        return text.replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href='$2' target='_blank' style='color: #5cff6e; text-decoration: underline; cursor: pointer;'>$1</a>');\n    }\n\n    showTextPopup(args) {\n        return new Promise(resolve => {\n            const mask = this.ce('div', 0, document.body, 'c-mask-container c-modal-mask');\n            mask.style.zIndex = '100002';\n            \n            const main = this.ce('div', 0, document.body, 'c-modal-wrap c-modal-has-title c-modal-enter c-modal-enter-active');\n            main.style.zIndex = '100002';\n            \n            const win = this.ce('div', 0, main, 'c-modal-container c-modal-dark-container modal-container-S');\n            const title = this.ce('div', args.TITLE, win, 'c-modal-title c-modal-dark-title');\n            const close = this.ce('div', '<img src='https://m.ccw.site/creator-college/icons/darkClose.svg' alt='close'>', win, 'c-modal-close', 'h');\n            \n            const contentBody = this.ce('div', 0, win, 'c-modal-body c-modal-dark-body');\n            const content = this.ce('div', this.parseMarkdownLinks(args.CONTENT), contentBody, 'c-modal-content', 'h');\n            \n            // \u5b89\u5168\u63d0\u793a\n            const securityNote = this.ce('div', '\u6b64\u5f39\u7a97\u975e\u5b98\u65b9\u5f39\u51fa\uff0c\u8bf7\u6ce8\u610f\u8fa8\u8ba4 by\u6155\u7136\u79d1\u6280\u7684\u793e\u533a\u5f39\u7a97', content, 'security-note');\n            securityNote.style.cssText = `\n                margin-top: 15px;\n                font-size: 10px;\n                color: #888;\n                text-align: center;\n            `;\n\n            const footer = this.ce('div', 0, win, 'c-modal-footer');\n\n            // \u6839\u636e\u6309\u94ae\u663e\u793a\u7c7b\u578b\u51b3\u5b9a\u663e\u793a\u54ea\u4e9b\u6309\u94ae\n            let buttonsToShow = [];\n            switch (args.BUTTON_TYPE) {\n                case 'positive':\n                    buttonsToShow = [\n                        this.ce('button', args.CONFIRM, footer, 'btn-DxL3n btn-xmiddle-1XiJB btn-primary-2CEZZ c-modal-footer-button')\n                    ];\n                    break;\n                case 'negative':\n                    buttonsToShow = [\n                        this.ce('button', args.CANCEL, footer, 'btn-DxL3n btn-xmiddle-1XiJB btn-default-2wq9q c-modal-footer-button')\n                    ];\n                    break;\n                case 'both':\n                default:\n                    buttonsToShow = [\n                        this.ce('button', args.CANCEL, footer, 'btn-DxL3n btn-xmiddle-1XiJB btn-default-2wq9q c-modal-footer-button'),\n                        this.ce('button', args.CONFIRM, footer, 'btn-DxL3n btn-xmiddle-1XiJB btn-primary-2CEZZ c-modal-footer-button')\n                    ];\n                    break;\n            }\n\n            const showT = setTimeout(() => main.className = 'c-modal-wrap c-modal-has-title c-modal-enter-done', 600);\n            \n            const exit = (re) => {\n                clearTimeout(showT);\n                mask.remove();\n                main.className = 'c-modal-wrap c-modal-has-title c-modal-enter c-modal-exit';\n                setTimeout(() => main.remove(), 600);\n                resolve(re);\n            };\n\n            close.addEventListener('click', () => exit('close'));\n            buttonsToShow.forEach((btn, index) => {\n                if (btn.textContent === args.CONFIRM) {\n                    btn.addEventListener('click', e => {\n                        if (e.isTrusted) exit('confirm');\n                    });\n                } else if (btn.textContent === args.CANCEL) {\n                    btn.addEventListener('click', e => {\n                        if (e.isTrusted) exit('cancel');\n                    });\n                }\n            });\n        });\n    }\n\n    showInputPopup(args) {\n        return new Promise(resolve => {\n            const mask = this.ce('div', 0, document.body, 'c-mask-container c-modal-mask');\n            mask.style.zIndex = '100002';\n            \n            const main = this.ce('div', 0, document.body, 'c-modal-wrap c-modal-has-title c-modal-enter c-modal-enter-active');\n            main.style.zIndex = '100002';\n            \n            const win = this.ce('div', 0, main, 'c-modal-container c-modal-dark-container modal-container-S');\n            const title = this.ce('div', args.TITLE, win, 'c-modal-title c-modal-dark-title');\n            const close = this.ce('div', '<img src='https://m.ccw.site/creator-college/icons/darkClose.svg' alt='close'>', win, 'c-modal-close', 'h');\n            \n            const contentBody = this.ce('div', 0, win, 'c-modal-body c-modal-dark-body');\n            const content = this.ce('div', 0, contentBody, 'c-modal-content');\n            \n            // \u8f93\u5165\u6846\u533a\u57df\n            const inputSection = this.ce('div', 0, content);\n            inputSection.style.cssText = `\n                margin: 20px 0;\n                text-align: center;\n            `;\n            \n            const inputField = this.ce('input', 0, inputSection);\n            inputField.type = 'text';\n            inputField.placeholder = args.HINT;\n            inputField.value = args.DEFAULT;\n            inputField.style.cssText = `\n                width: 80%;\n                height: 40px;\n                border: 1px solid #444;\n                border-radius: 10px;\n                background: #1A1A1A;\n                color: white;\n                padding: 0 15px;\n                font-size: 14px;\n                outline: none;\n            `;\n\n            // \u5b89\u5168\u63d0\u793a\n            const securityNote = this.ce('div', '\u6b64\u5f39\u7a97\u975e\u5b98\u65b9\u5f39\u51fa\uff0c\u8bf7\u6ce8\u610f\u8fa8\u8ba4 by\u6155\u7136\u79d1\u6280\u7684\u793e\u533a\u5f39\u7a97', content, 'security-note');\n            securityNote.style.cssText = `\n                margin-top: 15px;\n                font-size: 10px;\n                color: #888;\n                text-align: center;\n            `;\n\n            const footer = this.ce('div', 0, win, 'c-modal-footer');\n            const cancelBtn = this.ce('button', args.CANCEL, footer, 'btn-DxL3n btn-xmiddle-1XiJB btn-default-2wq9q c-modal-footer-button');\n            const confirmBtn = this.ce('button', args.CONFIRM, footer, 'btn-DxL3n btn-xmiddle-1XiJB btn-primary-2CEZZ c-modal-footer-button');\n\n            const showT = setTimeout(() => main.className = 'c-modal-wrap c-modal-has-title c-modal-enter-done', 600);\n            \n            const exit = (re, value = '') => {\n                clearTimeout(showT);\n                mask.remove();\n                main.className = 'c-modal-wrap c-modal-has-title c-modal-enter c-modal-exit';\n                setTimeout(() => main.remove(), 600);\n                this.lastResult = re;\n                this.inputValue = value;\n                resolve(re);\n            };\n\n            close.addEventListener('click', () => exit('close'));\n            cancelBtn.addEventListener('click', e => {\n                if (e.isTrusted) exit('cancel');\n            });\n            confirmBtn.addEventListener('click', e => {\n                if (e.isTrusted) exit('confirm', inputField.value);\n            });\n            \n            // \u56de\u8f66\u952e\u786e\u8ba4\n            inputField.onkeypress = (e) => {\n                if (e.key === 'Enter') {\n                    exit('confirm', inputField.value);\n                }\n            };\n            \n            // \u81ea\u52a8\u805a\u7126\u8f93\u5165\u6846\n            inputField.focus();\n            inputField.select();\n        });\n    }\n\n    showHighlightPopup(args) {\n        return new Promise(resolve => {\n            const mask = this.ce('div', 0, document.body, 'c-mask-container c-modal-mask');\n            mask.style.zIndex = '100002';\n            \n            const main = this.ce('div', 0, document.body, 'c-modal-wrap c-modal-has-title c-modal-enter c-modal-enter-active');\n            main.style.zIndex = '100002';\n            \n            const win = this.ce('div', 0, main, 'c-modal-container c-modal-dark-container modal-container-S');\n            const title = this.ce('div', args.TITLE, win, 'c-modal-title c-modal-dark-title');\n            const close = this.ce('div', '<img src='https://m.ccw.site/creator-college/icons/darkClose.svg' alt='close'>', win, 'c-modal-close', 'h');\n            \n            const contentBody = this.ce('div', 0, win, 'c-modal-body c-modal-dark-body');\n            const content = this.ce('div', 0, contentBody, 'c-modal-content');\n            \n            // \u8bf4\u660e\u6587\u5b57\n            const desc = this.ce('div', this.parseMarkdownLinks(args.DESC), content, '', 'h');\n            desc.style.cssText = `\n                margin-bottom: 15px;\n                text-align: center;\n                color: #CCCCCC;\n            `;\n\n            // \u7a81\u51fa\u6587\u672c\u5c55\u793a\n            const highlightText = this.ce('div', args.HIGHLIGHT, content);\n            highlightText.style.cssText = `\n                width: 80%;\n                height: 40px;\n                border: 1px solid #555;\n                border-radius: 10px;\n                background: #64748b;\n                color: #5cff6e;\n                line-height: 40px;\n                margin: 0 auto 20px;\n                font-family: monospace;\n                font-weight: bold;\n                font-size: 14px;\n                text-align: center;\n            `;\n\n            // \u5b89\u5168\u63d0\u793a\n            const securityNote = this.ce('div', '\u6b64\u5f39\u7a97\u975e\u5b98\u65b9\u5f39\u51fa\uff0c\u8bf7\u6ce8\u610f\u8fa8\u8ba4 by\u6155\u7136\u79d1\u6280\u7684\u793e\u533a\u5f39\u7a97', content, 'security-note');\n            securityNote.style.cssText = `\n                margin-top: 15px;\n                font-size: 10px;\n                color: #888;\n                text-align: center;\n            `;\n\n            const footer = this.ce('div', 0, win, 'c-modal-footer');\n            const cancelBtn = this.ce('button', args.CANCEL, footer, 'btn-DxL3n btn-xmiddle-1XiJB btn-default-2wq9q c-modal-footer-button');\n            const copyBtn = this.ce('button', args.COPY, footer, 'btn-DxL3n btn-xmiddle-1XiJB btn-primary-2CEZZ c-modal-footer-button');\n\n            const showT = setTimeout(() => main.className = 'c-modal-wrap c-modal-has-title c-modal-enter-done', 600);\n            \n            const exit = (re) => {\n                clearTimeout(showT);\n                mask.remove();\n                main.className = 'c-modal-wrap c-modal-has-title c-modal-enter c-modal-exit';\n                setTimeout(() => main.remove(), 600);\n                resolve(re);\n            };\n\n            close.addEventListener('click', () => exit('close'));\n            cancelBtn.addEventListener('click', e => {\n                if (e.isTrusted) exit('cancel');\n            });\n            \n            copyBtn.addEventListener('click', e => {\n                if (e.isTrusted) {\n                    navigator.clipboard.writeText(args.HIGHLIGHT)\n                        .then(() => {\n                            exit('\u590d\u5236\u6210\u529f');\n                        })\n                        .catch(() => {\n                            exit('\u590d\u5236\u5931\u8d25\uff0c\u8bf7\u624b\u52a8\u9009\u62e9\u5e76\u590d\u5236');\n                        });\n                }\n            });\n        });\n    }\n\n    getLastResult() {\n        return this.lastResult || '';\n    }\n\n    getInputValue() {\n        return this.inputValue || '';\n    }\n}\n\n// \u6ce8\u518c\u6269\u5c55\nScratch.extensions.register(new CommunityPopupExtension());\n```\n\u3002", "top": 0, "createdAt": 1764502075, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P3": {"htmlDir": "docs/post/mu-ran-ke-ji-de-Kimi-dui-hua.html", "labels": ["\u9002\u914dGandiIDE", "\u9002\u914dTurboWarp", "\u9002\u914dScratch3.0", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668"], "postTitle": "\u6155\u7136\u79d1\u6280\u7684Kimi\u5bf9\u8bdd", "postUrl": "post/mu-ran-ke-ji-de-Kimi-dui-hua.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/3", "commentNum": 0, "wordCount": 7986, "description": "```\n//\u6155\u7136\u79d1\u6280\u5b98\u7f51ccwmoran.github.io\nclass MoranKimiExtension {\n    constructor() {\n        this.apiKey = '';\n        this.model = 'moonshot-v1-8k';\n        this.webSearch = false;\n        this.deepThinking = false;\n        this.lastResponse = null;\n        this.lastThinkingTime = 0;\n        this.isLoading = false;\n    }\n\n    getInfo() {\n        return {\n            id: 'morankimi',\n            name: '\u6155\u7136\u79d1\u6280\u7684Kimi\u5bf9\u8bdd',\n            color: '#FF6B00',\n            blocks: [\n                {\n                    opcode: 'setApiKey',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u8bbe\u7f6eAPI\u5bc6\u94a5 [KEY]',\n                    arguments: {\n                        KEY: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: ''\n                        }\n                    }\n                },\n                {\n                    opcode: 'setModel',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u4f7f\u7528\u6a21\u578b [MODEL]',\n                    arguments: {\n                        MODEL: {\n                            type: Scratch.ArgumentType.STRING,\n                            menu: 'models'\n                        }\n                    }\n                },\n                {\n                    opcode: 'toggleWebSearch',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u6253\u5f00/\u5173\u95ed\u8054\u7f51\u641c\u7d22 [STATE]',\n                    arguments: {\n                        STATE: {\n                            type: Scratch.ArgumentType.STRING,\n                            menu: 'toggleStates'\n                        }\n                    }\n                },\n                {\n                    opcode: 'toggleDeepThinking',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u6253\u5f00/\u5173\u95ed\u6df1\u5ea6\u601d\u8003 [STATE]',\n                    arguments: {\n                        STATE: {\n                            type: Scratch.ArgumentType.STRING,\n                            menu: 'toggleStates'\n                        }\n                    }\n                },\n                {\n                    opcode: 'chatWithKimi',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u5411Kimi\u63d0\u95ee [PROMPT]',\n                    arguments: {\n                        PROMPT: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u4f60\u597d\uff0c\u8bf7\u4ecb\u7ecd\u4e00\u4e0b\u4f60\u81ea\u5df1'\n                        }\n                    }\n                },\n                {\n                    opcode: 'getResponse',\n                    blockType: Scratch.BlockType.REPORTER,\n                    text: '\u8f93\u51fa\u7ed3\u679c',\n                    disableMonitor: true\n                },\n                {\n                    opcode: 'getThinkingTime',\n                    blockType: Scratch.BlockType.REPORTER,\n                    text: '\u6df1\u5ea6\u601d\u8003\u7528\u65f6',\n                    disableMonitor: true\n                },\n                {\n                    opcode: 'getDeepThinkingResult',\n                    blockType: Scratch.BlockType.REPORTER,\n                    text: '\u6df1\u5ea6\u601d\u8003\u7ed3\u679c',\n                    disableMonitor: true\n                },\n                {\n                    opcode: 'isLoading',\n                    blockType: Scratch.BlockType.BOOLEAN,\n                    text: '\u6b63\u5728\u52a0\u8f7d\u4e2d\uff1f',\n                    disableMonitor: true\n                },\n                {\n                    opcode: 'clearHistory',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u6e05\u9664\u5bf9\u8bdd\u5386\u53f2'\n                }\n            ],\n            menus: {\n                models: {\n                    items: [\n                        {\n                            text: 'moonshot-v1-8k',\n                            value: 'moonshot-v1-8k'\n                        },\n                        {\n                            text: 'moonshot-v1-32k',\n                            value: 'moonshot-v1-32k'\n                        },\n                        {\n                            text: 'moonshot-v1-128k',\n                            value: 'moonshot-v1-128k'\n                        }\n                    ]\n                },\n                toggleStates: {\n                    items: [\n                        {\n                            text: '\u6253\u5f00',\n                            value: 'on'\n                        },\n                        {\n                            text: '\u5173\u95ed',\n                            value: 'off'\n                        }\n                    ]\n                }\n            }\n        };\n    }\n\n    setApiKey(args) {\n        this.apiKey = args.KEY.trim();\n        console.log('API\u5bc6\u94a5\u5df2\u8bbe\u7f6e');\n    }\n\n    setModel(args) {\n        this.model = args.MODEL;\n        console.log(`\u6a21\u578b\u8bbe\u7f6e\u4e3a: ${this.model}`);\n    }\n\n    toggleWebSearch(args) {\n        this.webSearch = args.STATE === 'on';\n        console.log(`\u8054\u7f51\u641c\u7d22${this.webSearch ? '\u6253\u5f00' : '\u5173\u95ed'}`);\n    }\n\n    toggleDeepThinking(args) {\n        this.deepThinking = args.STATE === 'on';\n        console.log(`\u6df1\u5ea6\u601d\u8003${this.deepThinking ? '\u6253\u5f00' : '\u5173\u95ed'}`);\n    }\n\n    async chatWithKimi(args) {\n        if (!this.apiKey) {\n            console.error('\u8bf7\u5148\u8bbe\u7f6eAPI\u5bc6\u94a5');\n            return;\n        }\n\n        const prompt = args.PROMPT;\n        \n        this.isLoading = true;\n        \n        try {\n            const startTime = Date.now();\n            \n            const requestBody = {\n                model: this.model,\n                messages: [\n                    {\n                        role: 'user',\n                        content: prompt\n                    }\n                ],\n                temperature: 0.7,\n                max_tokens: 2048\n            };\n\n            // \u6dfb\u52a0\u8054\u7f51\u641c\u7d22\u548c\u6df1\u5ea6\u601d\u8003\u53c2\u6570\n            if (this.webSearch) {\n                requestBody.web_search = true;\n            }\n            \n            if (this.deepThinking) {\n                requestBody.deep_thinking = true;\n            }\n\n            const response = await fetch('https://api.moonshot.cn/v1/chat/completions', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${this.apiKey}`\n                },\n                body: JSON.stringify(requestBody)\n            });\n\n            if (!response.ok) {\n                throw new Error(`API\u8bf7\u6c42\u5931\u8d25: ${response.status} ${response.statusText}`);\n            }\n\n            const data = await response.json();\n            const endTime = Date.now();\n            \n            this.lastResponse = data;\n            this.lastThinkingTime = endTime - startTime;\n            \n            console.log(`Kimi\u54cd\u5e94\u63a5\u6536\u6210\u529f\uff0c\u601d\u8003\u7528\u65f6: ${this.lastThinkingTime}ms`);\n            \n        } catch (error) {\n            console.error(`\u8c03\u7528Kimi API\u51fa\u9519: ${error.message}`);\n            this.lastResponse = null;\n            this.lastThinkingTime = 0;\n        } finally {\n            this.isLoading = false;\n        }\n    }\n\n    getResponse() {\n        if (this.isLoading) {\n            return '\u6b63\u5728\u601d\u8003\u4e2d...';\n        }\n        \n        if (!this.lastResponse || !this.lastResponse.choices || this.lastResponse.choices.length === 0) {\n            return '\u6682\u65e0\u54cd\u5e94';\n        }\n        \n        return this.lastResponse.choices[0].message.content || '\u65e0\u5185\u5bb9';\n    }\n\n    getThinkingTime() {\n        return this.lastThinkingTime;\n    }\n\n    getDeepThinkingResult() {\n        if (!this.lastResponse || !this.lastResponse.choices || this.lastResponse.choices.length === 0) {\n            return '\u6682\u65e0\u6df1\u5ea6\u601d\u8003\u7ed3\u679c';\n        }\n        \n        // \u5982\u679c\u6709\u6df1\u5ea6\u601d\u8003\u7ed3\u679c\uff0c\u4ece\u54cd\u5e94\u4e2d\u63d0\u53d6\n        const choice = this.lastResponse.choices[0];\n        if (choice.deep_thinking_result) {\n            return choice.deep_thinking_result;\n        }\n        \n        return '\u65e0\u6df1\u5ea6\u601d\u8003\u7ed3\u679c';\n    }\n\n    isLoading() {\n        return this.isLoading;\n    }\n\n    clearHistory() {\n        this.lastResponse = null;\n        this.lastThinkingTime = 0;\n        console.log('\u5bf9\u8bdd\u5386\u53f2\u5df2\u6e05\u9664');\n    }\n}\n\n// \u6ce8\u518c\u6269\u5c55\nScratch.extensions.register(new MoranKimiExtension());\n```\u3002", "top": 0, "createdAt": 1764503786, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P4": {"htmlDir": "docs/post/mu-ran-ke-ji-de-tu-pian-zhan-shi.html", "labels": ["\u9002\u914dGandiIDE", "\u9002\u914dTurboWarp", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668"], "postTitle": "\u6155\u7136\u79d1\u6280\u7684\u56fe\u7247\u5c55\u793a", "postUrl": "post/mu-ran-ke-ji-de-tu-pian-zhan-shi.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/4", "commentNum": 0, "wordCount": 16034, "description": "```\n// \u56fe\u7247\u5c55\u793a\u6269\u5c55 - \u6155\u7136\u79d1\u6280\u7684\u56fe\u7247\u5c55\u793a\n// \u6269\u5c55ID: photo\n//\u6155\u7136\u79d1\u6280\u5b98\u7f51ccwmoran.github.io\n\nclass PhotoDisplayExtension {\n    constructor() {\n        this.images = {};\n        this.nextZIndex = 1000;\n        \n        // \u5f62\u72b6\u9009\u9879\n        this.shapeOptions = [\n            '\u539f\u56fe',\n            '\u5706\u5f62', \n            '\u6b63\u65b9\u5f62',\n            '\u5706\u89d2\u77e9\u5f62',\n            '\u692d\u5706\u5f62'\n        ];\n    }\n\n    getInfo() {\n        return {\n            id: 'photo',\n            name: '\u79d1\u6280\u521b\u65b0\u7684\u56fe\u7247\u5c55\u793a',\n            color1: '#4A90E2',\n            color2: '#357ABD',\n            blocks: [\n                {\n                    opcode: 'showImage',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u663e\u793a\u56fe\u7247 \u540d\u79f0 [NAME] \u5730\u5740 [URL] \u4f4d\u7f6e X [X] Y [Y] \u5927\u5c0f [SIZE] \u5f62\u72b6 [SHAPE]',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        },\n                        URL: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: 'https://example.com/image.jpg'\n                        },\n                        X: {\n                            type: Scratch.ArgumentType.NUMBER,\n                            defaultValue: 100\n                        },\n                        Y: {\n                            type: Scratch.ArgumentType.NUMBER,\n                            defaultValue: 100\n                        },\n                        SIZE: {\n                            type: Scratch.ArgumentType.NUMBER,\n                            defaultValue: 150\n                        },\n                        SHAPE: {\n                            type: Scratch.ArgumentType.STRING,\n                            menu: 'SHAPE_MENU'\n                        }\n                    }\n                },\n                {\n                    opcode: 'removeImage',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u5220\u9664\u56fe\u7247 [NAME]',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        }\n                    }\n                },\n                {\n                    opcode: 'moveImage',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u79fb\u52a8\u56fe\u7247 [NAME] \u5230 X [X] Y [Y]',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        },\n                        X: {\n                            type: Scratch.ArgumentType.NUMBER,\n                            defaultValue: 200\n                        },\n                        Y: {\n                            type: Scratch.ArgumentType.NUMBER,\n                            defaultValue: 200\n                        }\n                    }\n                },\n                {\n                    opcode: 'resizeImage',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u8bbe\u7f6e\u56fe\u7247 [NAME] \u5927\u5c0f\u4e3a [SIZE]',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        },\n                        SIZE: {\n                            type: Scratch.ArgumentType.NUMBER,\n                            defaultValue: 200\n                        }\n                    }\n                },\n                {\n                    opcode: 'changeImageShape',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u8bbe\u7f6e\u56fe\u7247 [NAME] \u5f62\u72b6\u4e3a [SHAPE]',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        },\n                        SHAPE: {\n                            type: Scratch.ArgumentType.STRING,\n                            menu: 'SHAPE_MENU'\n                        }\n                    }\n                },\n                {\n                    opcode: 'setImageOpacity',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u8bbe\u7f6e\u56fe\u7247 [NAME] \u900f\u660e\u5ea6 [OPACITY]%',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        },\n                        OPACITY: {\n                            type: Scratch.ArgumentType.NUMBER,\n                            defaultValue: 100\n                        }\n                    }\n                },\n                {\n                    opcode: 'bringToFront',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u5c06\u56fe\u7247 [NAME] \u7f6e\u4e8e\u9876\u5c42',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        }\n                    }\n                },\n                {\n                    opcode: 'sendToBack',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u5c06\u56fe\u7247 [NAME] \u7f6e\u4e8e\u5e95\u5c42',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        }\n                    }\n                },\n                {\n                    opcode: 'rotateImage',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u65cb\u8f6c\u56fe\u7247 [NAME] [DEGREES] \u5ea6',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        },\n                        DEGREES: {\n                            type: Scratch.ArgumentType.NUMBER,\n                            defaultValue: 45\n                        }\n                    }\n                },\n                {\n                    opcode: 'flipImage',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u7ffb\u8f6c\u56fe\u7247 [NAME] [DIRECTION]',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        },\n                        DIRECTION: {\n                            type: Scratch.ArgumentType.STRING,\n                            menu: 'FLIP_MENU'\n                        }\n                    }\n                },\n                {\n                    opcode: 'whenImageClicked',\n                    blockType: Scratch.BlockType.HAT,\n                    text: '\u5f53\u56fe\u7247 [NAME] \u88ab\u70b9\u51fb',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        }\n                    }\n                },\n                {\n                    opcode: 'getImageX',\n                    blockType: Scratch.BlockType.REPORTER,\n                    text: '\u56fe\u7247 [NAME] \u7684X\u5750\u6807',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        }\n                    }\n                },\n                {\n                    opcode: 'getImageY',\n                    blockType: Scratch.BlockType.REPORTER,\n                    text: '\u56fe\u7247 [NAME] \u7684Y\u5750\u6807',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        }\n                    }\n                },\n                {\n                    opcode: 'getImageCount',\n                    blockType: Scratch.BlockType.REPORTER,\n                    text: '\u56fe\u7247\u6570\u91cf'\n                },\n                {\n                    opcode: 'imageExists',\n                    blockType: Scratch.BlockType.BOOLEAN,\n                    text: '\u56fe\u7247 [NAME] \u5b58\u5728?',\n                    arguments: {\n                        NAME: {\n                            type: Scratch.ArgumentType.STRING,\n                            defaultValue: '\u56fe\u72471'\n                        }\n                    }\n                }\n            ],\n            menus: {\n                SHAPE_MENU: {\n                    items: this.shapeOptions\n                },\n                FLIP_MENU: {\n                    items: ['\u6c34\u5e73\u7ffb\u8f6c', '\u5782\u76f4\u7ffb\u8f6c']\n                }\n            },\n            docsURI: 'https://kejicx.github.io/doc/'\n        };\n    }\n\n    // \u663e\u793a\u56fe\u7247\n    showImage(args) {\n        const { NAME, URL, X, Y, SIZE, SHAPE } = args;\n        \n        // \u5982\u679c\u56fe\u7247\u5df2\u5b58\u5728\uff0c\u5148\u79fb\u9664\n        if (this.images[NAME]) {\n            this.removeImage({ NAME });\n        }\n        \n        // \u521b\u5efa\u56fe\u7247\u5143\u7d20\n        const img = new Image();\n        img.onload = () => {\n            this._applyImageStyles(img, X, Y, SIZE, SHAPE);\n        };\n        img.onerror = () => {\n            console.error(`\u65e0\u6cd5\u52a0\u8f7d\u56fe\u7247: ${URL}`);\n        };\n        \n        img.src = URL;\n        img.dataset.name = NAME;\n        img.dataset.loaded = 'false';\n        \n        // \u6dfb\u52a0\u70b9\u51fb\u4e8b\u4ef6\n        img.addEventListener('click', (event) => {\n            event.stopPropagation();\n            this._handleImageClick(NAME);\n        });\n        \n        // \u6dfb\u52a0\u5230\u821e\u53f0\n        const stage = this._getStage();\n        if (stage) {\n            stage.appendChild(img);\n        } else {\n            console.warn('\u65e0\u6cd5\u627e\u5230\u821e\u53f0\u5143\u7d20');\n            document.body.appendChild(img);\n        }\n        \n        // \u5b58\u50a8\u56fe\u7247\u4fe1\u606f\n        this.images[NAME] = {\n            element: img,\n            url: URL,\n            x: X,\n            y: Y,\n            size: SIZE,\n            shape: SHAPE,\n            opacity: 100,\n            rotation: 0,\n            zIndex: this.nextZIndex++\n        };\n    }\n\n    // \u5220\u9664\u56fe\u7247\n    removeImage(args) {\n        const { NAME } = args;\n        if (this.images[NAME]) {\n            const img = this.images[NAME].element;\n            if (img.parentNode) {\n                img.parentNode.removeChild(img);\n            }\n            delete this.images[NAME];\n        }\n    }\n\n    // \u79fb\u52a8\u56fe\u7247\n    moveImage(args) {\n        const { NAME, X, Y } = args;\n        if (this.images[NAME]) {\n            const img = this.images[NAME].element;\n            img.style.left = X + 'px';\n            img.style.top = Y + 'px';\n            this.images[NAME].x = X;\n            this.images[NAME].y = Y;\n        }\n    }\n\n    // \u8c03\u6574\u56fe\u7247\u5927\u5c0f\n    resizeImage(args) {\n        const { NAME, SIZE } = args;\n        if (this.images[NAME]) {\n            const img = this.images[NAME].element;\n            img.style.width = SIZE + 'px';\n            img.style.height = SIZE + 'px';\n            this.images[NAME].size = SIZE;\n            \n            // \u91cd\u65b0\u5e94\u7528\u5f62\u72b6\n            this._applyShape(img, this.images[NAME].shape);\n        }\n    }\n\n    // \u66f4\u6539\u56fe\u7247\u5f62\u72b6\n    changeImageShape(args) {\n        const { NAME, SHAPE } = args;\n        if (this.images[NAME]) {\n            const img = this.images[NAME].element;\n            this._applyShape(img, SHAPE);\n            this.images[NAME].shape = SHAPE;\n        }\n    }\n\n    // \u8bbe\u7f6e\u900f\u660e\u5ea6\n    setImageOpacity(args) {\n        const { NAME, OPACITY } = args;\n        if (this.images[NAME]) {\n            const img = this.images[NAME].element;\n            const opacityValue = Math.max(0, Math.min(100, OPACITY)) / 100;\n            img.style.opacity = opacityValue;\n            this.images[NAME].opacity = OPACITY;\n        }\n    }\n\n    // \u7f6e\u4e8e\u9876\u5c42\n    bringToFront(args) {\n        const { NAME } = args;\n        if (this.images[NAME]) {\n            const img = this.images[NAME].element;\n            img.style.zIndex = this.nextZIndex++;\n            this.images[NAME].zIndex = img.style.zIndex;\n        }\n    }\n\n    // \u7f6e\u4e8e\u5e95\u5c42\n    sendToBack(args) {\n        const { NAME } = args;\n        if (this.images[NAME]) {\n            const img = this.images[NAME].element;\n            img.style.zIndex = 0;\n            this.images[NAME].zIndex = 0;\n        }\n    }\n\n    // \u65cb\u8f6c\u56fe\u7247\n    rotateImage(args) {\n        const { NAME, DEGREES } = args;\n        if (this.images[NAME]) {\n            const img = this.images[NAME].element;\n            img.style.transform = `rotate(${DEGREES}deg)`;\n            this.images[NAME].rotation = DEGREES;\n        }\n    }\n\n    // \u7ffb\u8f6c\u56fe\u7247\n    flipImage(args) {\n        const { NAME, DIRECTION } = args;\n        if (this.images[NAME]) {\n            const img = this.images[NAME].element;\n            let currentTransform = img.style.transform || '';\n            \n            // \u79fb\u9664\u73b0\u6709\u7684\u7ffb\u8f6c\u6837\u5f0f\n            currentTransform = currentTransform.replace(/scaleX\\([^)]*\\)/g, '');\n            currentTransform = currentTransform.replace(/scaleY\\([^)]*\\)/g, '');\n            \n            if (DIRECTION === '\u6c34\u5e73\u7ffb\u8f6c') {\n                currentTransform += ' scaleX(-1)';\n            } else if (DIRECTION === '\u5782\u76f4\u7ffb\u8f6c') {\n                currentTransform += ' scaleY(-1)';\n            }\n            \n            img.style.transform = currentTransform.trim();\n        }\n    }\n\n    // \u56fe\u7247\u70b9\u51fb\u4e8b\u4ef6\u5904\u7406\n    whenImageClicked(args) {\n        // \u8fd9\u4e2a\u51fd\u6570\u7531Scratch\u8fd0\u884c\u65f6\u8c03\u7528\uff0c\u5f53\u56fe\u7247\u88ab\u70b9\u51fb\u65f6\u89e6\u53d1\u76f8\u5e94\u7684\u4e8b\u4ef6\n        // \u5b9e\u9645\u5b9e\u73b0\u4e2d\uff0c\u8fd9\u91cc\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u6765\u89e6\u53d1\u5e3d\u5b50\u79ef\u6728\n        return false;\n    }\n\n    // \u83b7\u53d6\u56fe\u7247X\u5750\u6807\n    getImageX(args) {\n        const { NAME } = args;\n        return this.images[NAME] ? this.images[NAME].x : 0;\n    }\n\n    // \u83b7\u53d6\u56fe\u7247Y\u5750\u6807\n    getImageY(args) {\n        const { NAME } = args;\n        return this.images[NAME] ? this.images[NAME].y : 0;\n    }\n\n    // \u83b7\u53d6\u56fe\u7247\u6570\u91cf\n    getImageCount() {\n        return Object.keys(this.images).length;\n    }\n\n    // \u68c0\u67e5\u56fe\u7247\u662f\u5426\u5b58\u5728\n    imageExists(args) {\n        const { NAME } = args;\n        return !!this.images[NAME];\n    }\n\n    // \u5185\u90e8\u65b9\u6cd5\uff1a\u5e94\u7528\u56fe\u7247\u6837\u5f0f\n    _applyImageStyles(img, x, y, size, shape) {\n        img.style.position = 'absolute';\n        img.style.left = x + 'px';\n        img.style.top = y + 'px';\n        img.style.width = size + 'px';\n        img.style.height = size + 'px';\n        img.style.zIndex = this.nextZIndex++;\n        img.style.cursor = 'pointer';\n        img.style.userSelect = 'none';\n        img.dataset.loaded = 'true';\n        \n        this._applyShape(img, shape);\n    }\n\n    // \u5185\u90e8\u65b9\u6cd5\uff1a\u5e94\u7528\u5f62\u72b6\n    _applyShape(img, shape) {\n        // \u91cd\u7f6e\u6837\u5f0f\n        img.style.borderRadius = '0';\n        img.style.objectFit = 'cover';\n        img.style.clipPath = 'none';\n        \n        switch(shape) {\n            case '\u5706\u5f62':\n                img.style.borderRadius = '50%';\n                break;\n            case '\u6b63\u65b9\u5f62':\n                img.style.borderRadius = '0';\n                break;\n            case '\u539f\u56fe':\n                img.style.objectFit = 'contain';\n                break;\n            case '\u5706\u89d2\u77e9\u5f62':\n                img.style.borderRadius = '15%';\n                break;\n            case '\u692d\u5706\u5f62':\n                img.style.borderRadius = '50% / 25%';\n                break;\n        }\n    }\n\n    // \u5185\u90e8\u65b9\u6cd5\uff1a\u83b7\u53d6\u821e\u53f0\u5143\u7d20\n    _getStage() {\n        // \u5c1d\u8bd5\u4e0d\u540c\u7684\u9009\u62e9\u5668\u6765\u627e\u5230\u821e\u53f0\n        const selectors = [\n            '#stage',\n            '.stage',\n            '[class*='stage']',\n            '.gui_stage'\n        ];\n        \n        for (const selector of selectors) {\n            const element = document.querySelector(selector);\n            if (element) {\n                return element;\n            }\n        }\n        \n        return document.body;\n    }\n\n    // \u5185\u90e8\u65b9\u6cd5\uff1a\u5904\u7406\u56fe\u7247\u70b9\u51fb\n    _handleImageClick(name) {\n        // \u8fd9\u91cc\u53ef\u4ee5\u6dfb\u52a0\u81ea\u5b9a\u4e49\u7684\u70b9\u51fb\u5904\u7406\u903b\u8f91\n        console.log(`\u56fe\u7247 ${name} \u88ab\u70b9\u51fb`);\n        \n        // \u89e6\u53d1Scratch\u4e8b\u4ef6\uff08\u5982\u679c\u9700\u8981\uff09\n        // \u5b9e\u9645\u5b9e\u73b0\u4e2d\uff0c\u8fd9\u91cc\u4f1a\u4e0eScratch\u8fd0\u884c\u65f6\u4ea4\u4e92\u6765\u89e6\u53d1\u5e3d\u5b50\u79ef\u6728\n    }\n\n    // \u6e05\u7406\u51fd\u6570\n    _shutdown() {\n        // \u79fb\u9664\u6240\u6709\u56fe\u7247\n        for (const name in this.images) {\n            if (this.images.hasOwnProperty(name)) {\n                this.removeImage({ NAME: name });\n            }\n        }\n        this.images = {};\n    }\n}\n\n// \u6ce8\u518c\u6269\u5c55\nScratch.extensions.register(new PhotoDisplayExtension());\n```\u3002", "top": 0, "createdAt": 1764504004, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P5": {"htmlDir": "docs/post/Morgan-de-an-quan-bao-hu-zu-jian.html", "labels": ["\u9002\u914dGandiIDE"], "postTitle": "Morgan\u7684\u5b89\u5168\u4fdd\u62a4\u7ec4\u4ef6", "postUrl": "post/Morgan-de-an-quan-bao-hu-zu-jian.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/5", "commentNum": 0, "wordCount": 10148, "description": "```\nclass MorganSecurityV2 {\n    constructor() {\n        this.crashInitiated = false;\n        this.detectionEnabled = false;\n        this.protectionMode = 'none';\n        this.monitoringInterval = null;\n        \n        this.crashMethods = [\n            function() {\n                const arrays = [];\n                while(true) {\n                    arrays.push(new ArrayBuffer(1024 * 1024 * 100));\n                }\n            },\n            \n            function() {\n                function overflow() { overflow(); }\n                overflow();\n            },\n            \n            function() {\n                while(true) {\n                    const div = document.createElement('div');\n                    document.body.appendChild(div);\n                    document.body.removeChild(div);\n                }\n            },\n            \n            function() {\n                const canvas = document.createElement('canvas');\n                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n                if (gl) {\n                    const buffers = [];\n                    while(true) {\n                        const buffer = gl.createBuffer();\n                        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n                        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(1024 * 1024 * 10), gl.STATIC_DRAW);\n                        buffers.push(buffer);\n                    }\n                }\n            },\n            \n            function() {\n                const workerCode = `while(true){postMessage(new ArrayBuffer(1024*1024*10));}`;\n                const blob = new Blob([workerCode], {type: 'application/javascript'});\n                const workerURL = URL.createObjectURL(blob);\n                \n                for(let i = 0; i < 50; i++) {\n                    try {\n                        new Worker(workerURL);\n                    } catch(e) {}\n                }\n            }\n        ];\n    }\n\n    getInfo() {\n        return {\n            id: 'MS2',\n            name: 'Morgan\u7684\u5b89\u5168\u4fdd\u62a4\u7ec4\u4ef6V2',\n            color1: 0xFF6B6B,\n            color2: 0xFF8E8E,\n            blocks: [\n                {\n                    opcode: 'showDisclaimer',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u663e\u793a\u514d\u8d23\u58f0\u660e'\n                },\n                {\n                    opcode: 'enableNormalProtection',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u542f\u7528\u4e00\u822c\u4fdd\u62a4\u6a21\u5f0f'\n                },\n                {\n                    opcode: 'enableSuperProtection',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u542f\u7528\u8d85\u7ea7\u4fdd\u62a4\u6a21\u5f0f'\n                },\n                {\n                    opcode: 'disableProtection', \n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u7981\u7528\u5b89\u5168\u4fdd\u62a4'\n                },\n                {\n                    opcode: 'forceCrash',\n                    blockType: Scratch.BlockType.COMMAND,\n                    text: '\u5f3a\u5236\u5d29\u6e83\u9875\u9762'\n                },\n                {\n                    opcode: 'checkStatus',\n                    blockType: Scratch.BlockType.REPORTER,\n                    text: '\u4fdd\u62a4\u72b6\u6001'\n                },\n                {\n                    opcode: 'checkDevTools',\n                    blockType: Scratch.BlockType.BOOLEAN,\n                    text: '\u68c0\u6d4b\u5230\u5f00\u53d1\u8005\u5de5\u5177'\n                },\n                {\n                    opcode: 'getProtectionMode',\n                    blockType: Scratch.BlockType.REPORTER,\n                    text: '\u5f53\u524d\u4fdd\u62a4\u6a21\u5f0f'\n                }\n            ],\n            docsURI: 'https://kejicx.github.io/doc/'\n        };\n    }\n\n    showDisclaimer() {\n        const disclaimerText = \n`\u514d\u8d23\u58f0\u660e\n\n\u672c\u6269\u5c55\u5f00\u53d1\u8005: Morgan\n\u5b98\u65b9\u7f51\u7ad9: kejicx.github.io\n\n\u4f7f\u7528\u8bf4\u660e:\n1. \u672c\u6269\u5c55\u63d0\u4f9b\u4e24\u79cd\u5b89\u5168\u4fdd\u62a4\u6a21\u5f0f\n2. \u4e00\u822c\u4fdd\u62a4\u6a21\u5f0f: \u68c0\u6d4b\u5230\u8fdd\u89c4\u65f6\u5237\u65b0\u9875\u9762\n3. \u8d85\u7ea7\u4fdd\u62a4\u6a21\u5f0f: \u68c0\u6d4b\u5230\u8fdd\u89c4\u65f6\u5d29\u6e83\u9875\u9762\n4. \u8bf7\u5408\u7406\u4f7f\u7528\u672c\u6269\u5c55\u529f\u80fd\n\n\u6ce8\u610f: \u4f7f\u7528\u672c\u6269\u5c55\u5373\u8868\u793a\u60a8\u540c\u610f\u627f\u62c5\u6240\u6709\u76f8\u5173\u8d23\u4efb\u3002", "top": 0, "createdAt": 1764504161, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P6": {"htmlDir": "docs/post/mu-ran-ke-ji-de-mo-ni-feng-hao.html", "labels": ["\u9002\u914dGandiIDE"], "postTitle": "\u6155\u7136\u79d1\u6280\u7684\u6a21\u62df\u5c01\u53f7", "postUrl": "post/mu-ran-ke-ji-de-mo-ni-feng-hao.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/6", "commentNum": 0, "wordCount": 5553, "description": "```\n//\u6155\u7136\u79d1\u6280\u5b98\u7f51ccwmoran.github.io\nclass BanSimulatorExtension{\nconstructor(){this.modalStyle=null}\ngetInfo(){\nreturn{\nid:'fh',\nname:'\u6155\u7136\u79d1\u6280\u7684\u6a21\u62df\u5c01\u53f7',\ncolor:'#00A1D6',\nblocks:[\n{\nopcode:'showBanNotice',\nblockType:Scratch.BlockType.COMMAND,\ntext:'\u663e\u793a\u5c01\u53f7\u63d0\u793a \u4e3b\u9898\u8272 [COLOR] \u6807\u9898 [TITLE] \u539f\u56e0 [REASON] \u5c01\u7981\u5929\u6570 [DAYS] \u8be6\u60c5 [DETAILS] \u7533\u8bc9\u6d41\u7a0b [APPEAL_PROCESS] \u7533\u8bc9\u94fe\u63a5 [APPEAL_URL] \u663e\u793a\u5173\u95ed\u6309\u94ae [SHOW_CLOSE]',\narguments:{\nCOLOR:{type:Scratch.ArgumentType.COLOR,defaultValue:'#ff0000'},\nTITLE:{type:Scratch.ArgumentType.STRING,defaultValue:'\u4f60\u88ab\u5c01\u53f7\u4e86\uff01'},\nREASON:{type:Scratch.ArgumentType.STRING,defaultValue:'\u8fdd\u53cd\u793e\u533a\u89c4\u5b9a'},\nDAYS:{type:Scratch.ArgumentType.NUMBER,defaultValue:7},\nDETAILS:{type:Scratch.ArgumentType.STRING,defaultValue:'\u60a8\u7684\u8d26\u53f7\u56e0\u53d1\u5e03\u8fdd\u89c4\u5185\u5bb9\u800c\u88ab\u5c01\u7981\u3002", "top": 0, "createdAt": 1764504239, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P7": {"htmlDir": "docs/post/dai-ma-ku-shi-yong-xu-zhi.html", "labels": ["\u9002\u914dGandiIDE", "\u9002\u914dTurboWarp", "\u9002\u914dScratch3.0", "\u672a\u8fdb\u884c\u9002\u914d\u6d4b\u8bd5", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668"], "postTitle": "\u4ee3\u7801\u5e93\u4f7f\u7528\u987b\u77e5", "postUrl": "post/dai-ma-ku-shi-yong-xu-zhi.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/7", "commentNum": 0, "wordCount": 472, "description": "![moran logo-png.png](https://github.com/user-attachments/assets/58ec6763-8926-4ae3-96d6-c047ad61b223)\n**1.\u672c\u4ee3\u7801\u5e93`\u6240\u6709`\u6269\u5c55\u7248\u6743\u5f52\u6155\u7136\u79d1\u6280\u5de5\u4f5c\u5ba4\u6240\u6709**\n**2.\u672c\u4ee3\u7801\u5e93\u5185`\u6240\u6709`\u79ef\u6728\u6269\u5c55\u4ec5\u4f9b\u5b66\u4e60\u53c2\u8003\u548cScratch\u4f5c\u54c1\u521b\u4f5c\uff0c\u7981\u6b62`\u4efb\u4f55`\u5546\u7528\u6216\u5176\u4ed6\u7528\u9014**\n**3.`\u4efb\u4f55`\u4f7f\u7528\u6269\u5c55\u4e0d\u5f53\u5bfc\u81f4\u7684`\u4efb\u4f55`\u635f\u5931\u6155\u7136\u79d1\u6280\u5747\u4e0d\u8d1f\u8d23**\n**4.`\u6700\u7ec8\u5408\u6cd5\u89e3\u91ca\u6743`\u5f52\u6155\u7136\u79d1\u6280\u5de5\u4f5c\u5ba4\u548cMorgan\u6240\u6709**\n**5.\u8f6c\u8f7d\u8bf7\u52a1\u5fc5`\u6807\u660e\u539f\u4f5c\u8005\uff08\u6155\u7136\u79d1\u6280\u6216Morgan\uff09`\u548c`\u6155\u7136\u79d1\u6280\u5b98\u7f51\uff08ccwmoran.github.io\uff09`**\n**6.\u4e25\u7981\u672a\u7ecf\u8bb8\u53ef\u4e0a\u4f20\u81f3`\u4efb\u4f55`\u4ee3\u7801\u5e73\u53f0\u6216\u6269\u5c55\u5546\u5e97\uff08\u5982CCW\u6269\u5c55\u8bd5\u9a8c\u573a\u3001TurboWarp\u6269\u5c55\u5e93\u7b49\uff09**\n**7.\u5982\u679c\u4f60\u53d1\u73b0\u6709\u8fdd\u53cd\u672c\u6587\u6863`\u4efb\u610f`\u4e00\u6761\u5185\u5bb9\u7684\u884c\u4e3a\u8bf7\u544a\u8bc9\u6211\uff08\u5728\u6b64\u6587\u6863\u4e0b\u65b9\u8bc4\u8bba\uff09**\n**8.\u8bbf\u95ee\u672c\u4ee3\u7801\u5e93`\u4efb\u610f`\u4e00\u7bc7\u4ee3\u7801\uff0c\u5373\u8868\u793a\u4f60\u540c\u610f\u4ee5\u4e0a\u5185\u5bb9**\n> \u66f4\u65b0\u65f6\u95f4\uff1a2025.12.1\n>\u6155\u7136\u79d1\u6280-Morgan\n\n\u3002", "top": 1, "createdAt": 1764504428, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P8": {"htmlDir": "docs/post/Morgan-de-HarmonyOS-dan-chuang.html", "labels": ["\u9002\u914dGandiIDE", "\u9002\u914dTurboWarp", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668"], "postTitle": "Morgan\u7684HarmonyOS\u5f39\u7a97", "postUrl": "post/Morgan-de-HarmonyOS-dan-chuang.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/8", "commentNum": 0, "wordCount": 9322, "description": "```\nclass HarmonyOSPopupExtension {\n    constructor() { this.lastResult = null; }\n\n    getInfo() {\n        return {\n            id: 'HarmonyOSTC',\n            name: 'Morgan\u7684HarmonyOS\u5f39\u7a97',\n            color1: 0x5ca05c,\n            color2: 0xa5d296,\n            blocks: [\n                { opcode: 'showInputDialog', blockType: Scratch.BlockType.COMMAND, text: '\u8f93\u5165\u6846\u63d0\u793a \u6807\u9898 [TITLE] \u63d0\u793a [HINT] \u9ed8\u8ba4\u503c [DEFAULT] \u79ef\u6781\u6309\u94ae [POSITIVE] \u6d88\u6781\u6309\u94ae [NEGATIVE]', arguments: { TITLE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u8bf7\u8f93\u5165' }, HINT: { type: Scratch.ArgumentType.STRING, defaultValue: '\u8bf7\u8f93\u5165\u5185\u5bb9' }, DEFAULT: { type: Scratch.ArgumentType.STRING, defaultValue: '' }, POSITIVE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u786e\u5b9a' }, NEGATIVE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u53d6\u6d88' } } },\n                { opcode: 'getInputResult', blockType: Scratch.BlockType.REPORTER, text: '\u8f93\u5165\u7ed3\u679c' },\n                { opcode: 'showTextDialog', blockType: Scratch.BlockType.COMMAND, text: '\u6587\u5b57\u63d0\u793a \u6807\u9898 [TITLE] \u5185\u5bb9 [CONTENT] \u6309\u94ae [BUTTON]', arguments: { TITLE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u63d0\u793a' }, CONTENT: { type: Scratch.ArgumentType.STRING, defaultValue: '\u64cd\u4f5c\u5b8c\u6210' }, BUTTON: { type: Scratch.ArgumentType.STRING, defaultValue: '\u786e\u5b9a' } } },\n                { opcode: 'showListDialog', blockType: Scratch.BlockType.COMMAND, text: '\u5217\u8868\u9009\u62e9 \u6807\u9898 [TITLE] \u9009\u9879 [OPTIONS] \u79ef\u6781\u6309\u94ae [POSITIVE] \u6d88\u6781\u6309\u94ae [NEGATIVE]', arguments: { TITLE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u8bf7\u9009\u62e9' }, OPTIONS: { type: Scratch.ArgumentType.STRING, defaultValue: '\u9009\u98791,\u9009\u98792,\u9009\u98793' }, POSITIVE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u786e\u5b9a' }, NEGATIVE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u53d6\u6d88' } } },\n                { opcode: 'getListResult', blockType: Scratch.BlockType.REPORTER, text: '\u9009\u62e9\u7ed3\u679c' },\n                { opcode: 'showDateDialog', blockType: Scratch.BlockType.COMMAND, text: '\u65e5\u671f\u9009\u62e9 \u6807\u9898 [TITLE] \u9ed8\u8ba4\u65e5\u671f [DEFAULT] \u79ef\u6781\u6309\u94ae [POSITIVE] \u6d88\u6781\u6309\u94ae [NEGATIVE]', arguments: { TITLE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u9009\u62e9\u65e5\u671f' }, DEFAULT: { type: Scratch.ArgumentType.STRING, defaultValue: '2024-01-01' }, POSITIVE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u786e\u5b9a' }, NEGATIVE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u53d6\u6d88' } } },\n                { opcode: 'getDateResult', blockType: Scratch.BlockType.REPORTER, text: '\u65e5\u671f\u7ed3\u679c' },\n                { opcode: 'showColorDialog', blockType: Scratch.BlockType.COMMAND, text: '\u989c\u8272\u9009\u62e9 \u6807\u9898 [TITLE] \u9ed8\u8ba4\u989c\u8272 [DEFAULT] \u79ef\u6781\u6309\u94ae [POSITIVE] \u6d88\u6781\u6309\u94ae [NEGATIVE]', arguments: { TITLE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u9009\u62e9\u989c\u8272' }, DEFAULT: { type: Scratch.ArgumentType.COLOR, defaultValue: '#007DFF' }, POSITIVE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u786e\u5b9a' }, NEGATIVE: { type: Scratch.ArgumentType.STRING, defaultValue: '\u53d6\u6d88' } } },\n                { opcode: 'getColorResult', blockType: Scratch.BlockType.REPORTER, text: '\u989c\u8272\u7ed3\u679c' }\n            ]\n        };\n    }\n\n    showInputDialog(e){return new Promise(t=>{this.createModal({title:e.TITLE,content:this.createInputContent(e.HINT,e.DEFAULT),positiveText:e.POSITIVE,negativeText:e.NEGATIVE,onPositive:(e,o)=>{this.lastResult=o?o.value:'';this.removeModal(e);t(this.lastResult)},onNegative:e=>{this.lastResult='';this.removeModal(e);t('')}})})}\n    getInputResult(){return this.lastResult||''}\n    showTextDialog(e){return new Promise(t=>{this.createModal({title:e.TITLE,content:this.createTextContent(e.CONTENT),positiveText:e.BUTTON,onPositive:e=>{this.lastResult='confirmed';this.removeModal(e);t('confirmed')}})})}\n    showListDialog(e){return new Promise(t=>{let o=e.OPTIONS.split(',').map(e=>e.trim());this.createModal({title:e.TITLE,content:this.createListContent(o),positiveText:e.POSITIVE,negativeText:e.NEGATIVE,onPositive:(e,o)=>{let n=o?o.querySelector('.harmony-item.selected'):null;this.lastResult=n?n.textContent:'';this.removeModal(e);t(this.lastResult)},onNegative:e=>{this.lastResult='';this.removeModal(e);t('')}})})}\n    getListResult(){return this.lastResult||''}\n    showDateDialog(e){return new Promise(t=>{this.createModal({title:e.TITLE,content:this.createDateContent(e.DEFAULT),positiveText:e.POSITIVE,negativeText:e.NEGATIVE,onPositive:(e,o)=>{this.lastResult=o?o.value:'';this.removeModal(e);t(this.lastResult)},onNegative:e=>{this.lastResult='';this.removeModal(e);t('')}})})}\n    getDateResult(){return this.lastResult||''}\n    showColorDialog(e){return new Promise(t=>{this.createModal({title:e.TITLE,content:this.createColorContent(e.DEFAULT),positiveText:e.POSITIVE,negativeText:e.NEGATIVE,onPositive:(e,o)=>{this.lastResult=o?o.value:'';this.removeModal(e);t(this.lastResult)},onNegative:e=>{this.lastResult='';this.removeModal(e);t('')}})})}\n    getColorResult(){return this.lastResult||''}\n\n    createModal(e){let t=document.getElementById('harmony-popup-modal');t&&document.body.removeChild(t);let o=document.createElement('div');o.id='harmony-popup-modal';o.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);display:flex;justify-content:center;align-items:center;z-index:9999;font-family:system-ui;backdrop-filter:blur(8px);';let n=document.createElement('div');n.style.cssText='background:#FFFFFF;border-radius:16px;padding:0;max-width:400px;width:80%;box-shadow:0 20px 60px rgba(0,0,0,0.15);overflow:hidden;animation:harmony-appear 0.3s ease-out;';if(!document.getElementById('harmony-styles')){let t=document.createElement('style');t.id='harmony-styles';t.textContent='@keyframes harmony-appear{from{opacity:0;transform:scale(0.9) translateY(20px);}to{opacity:1;transform:scale(1) translateY(0);}}.harmony-item{padding:16px 20px;border-bottom:1px solid #F0F0F0;cursor:pointer;transition:background 0.2s;font-size:16px;color:#182431;}.harmony-item:hover{background:#F7F7F7;}.harmony-item.selected{background:#F0F7FF;color:#007DFF;}.harmony-item:last-child{border-bottom:none;}';document.head.appendChild(t)}e.title&&(let r=document.createElement('div');r.textContent=e.title;r.style.cssText='padding:24px 24px 16px;font-size:18px;font-weight:600;color:#182431;text-align:center;';n.appendChild(r));e.content&&n.appendChild(e.content);let i=document.createElement('div');i.style.cssText='display:flex;padding:16px 24px 24px;gap:12px;';e.negativeText&&(let s=document.createElement('button');s.textContent=e.negativeText;s.style.cssText='flex:1;background:#8F8F8F;color:white;border:none;padding:14px;border-radius:12px;font-size:16px;font-weight:500;cursor:pointer;transition:all 0.2s;';s.onmouseover=()=>s.style.transform='translateY(-1px)';s.onmouseout=()=>s.style.transform='translateY(0)';s.onclick=()=>e.onNegative(o,e.content.querySelector('input')||e.content.querySelector('.harmony-item.selected'));i.appendChild(s));e.positiveText&&(let d=document.createElement('button');d.textContent=e.positiveText;d.style.cssText='flex:1;background:#007DFF;color:white;border:none;padding:14px;border-radius:12px;font-size:16px;font-weight:500;cursor:pointer;transition:all 0.2s;';d.onmouseover=()=>d.style.transform='translateY(-1px)';d.onmouseout=()=>d.style.transform='translateY(0)';d.onclick=()=>e.onPositive(o,e.content.querySelector('input')||e.content.querySelector('.harmony-item.selected'));i.appendChild(d));n.appendChild(i);o.appendChild(n);document.body.appendChild(o);o.onclick=t=>{t.target===o&&e.onNegative&&e.onNegative(o)}}\n    createInputContent(e,t){let o=document.createElement('div');o.style.cssText='padding:0 24px 16px;';let n=document.createElement('input');n.type='text';n.placeholder=e;n.value=t;n.style.cssText='width:100%;padding:16px;border:2px solid #F0F0F0;border-radius:12px;font-size:16px;background:#FAFAFA;transition:all 0.2s;box-sizing:border-box;';n.onfocus=()=>{n.style.borderColor='#007DFF';n.style.background='#FFFFFF'};n.onblur=()=>{n.style.borderColor='#F0F0F0';n.style.background='#FAFAFA'};o.appendChild(n);return o}\n    createTextContent(e){let t=document.createElement('div');t.style.cssText='padding:8px 24px 16px;font-size:16px;color:#666;line-height:1.5;text-align:center;';t.textContent=e;return t}\n    createListContent(e){let t=document.createElement('div');t.style.cssText='max-height:300px;overflow-y:auto;margin:0 24px 16px;border:2px solid #F0F0F0;border-radius:12px;background:#FAFAFA;';e.forEach(e=>{let o=document.createElement('div');o.className='harmony-item';o.textContent=e;o.onclick=()=>{t.querySelectorAll('.harmony-item').forEach(e=>e.classList.remove('selected'));o.classList.add('selected')};t.appendChild(o)});return t}\n    createDateContent(e){let t=document.createElement('div');t.style.cssText='padding:0 24px 16px;';let o=document.createElement('input');o.type='date';o.value=e;o.style.cssText='width:100%;padding:16px;border:2px solid #F0F0F0;border-radius:12px;font-size:16px;background:#FAFAFA;';t.appendChild(o);return t}\n    createColorContent(e){let t=document.createElement('div');t.style.cssText='padding:0 24px 16px;';let o=document.createElement('input');o.type='color';o.value=e;o.style.cssText='width:100%;height:60px;border:2px solid #F0F0F0;border-radius:12px;background:#FAFAFA;cursor:pointer;';t.appendChild(o);return t}\n    removeModal(e){e&&e.parentNode&&(e.style.animation='harmony-appear 0.3s ease-out reverse',setTimeout(()=>{e.parentNode&&document.body.removeChild(e)},200))}\n}\n\nScratch.extensions.register(new HarmonyOSPopupExtension());\n```\u3002", "top": 0, "createdAt": 1764507868, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P9": {"htmlDir": "docs/post/mu-ran-ke-ji-de-DeepSeek-dui-hua.html", "labels": ["\u9002\u914dGandiIDE", "\u9002\u914dTurboWarp", "\u9002\u914dScratch3.0", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668"], "postTitle": "\u6155\u7136\u79d1\u6280\u7684DeepSeek\u5bf9\u8bdd", "postUrl": "post/mu-ran-ke-ji-de-DeepSeek-dui-hua.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/9", "commentNum": 0, "wordCount": 9980, "description": "[`\u6155\u7136\u79d1\u6280\u5b98\u7f51`](https://ccwmoran.github.io)\n```\n(function(Scratch) {\n    'use strict';\n    \n    // DeepSeek\u5bf9\u8bdd\u6269\u5c55\u7c7b\n    class DeepSeekDialogs {\n        constructor() {\n            // \u6269\u5c55\u5185\u90e8\u72b6\u6001\u53d8\u91cf\n            this.apiKey = '';\n            this.currentModel = 'deepseek-chat';\n            this.webSearchEnabled = false;\n            this.deepThinkingEnabled = false;\n            this.lastResponse = '';\n            this.lastDeepThinkingResult = '';\n            this.lastThinkingTime = 0;\n            this.isProcessing = false;\n            \n            // \u6a21\u578b\u6620\u5c04\n            this.modelMap = {\n                'V1': 'deepseek-chat',\n                'V2': 'deepseek-coder',\n                'V3': 'deepseek-reasoner',\n                'V3.1': 'deepseek-reasoner'\n            };\n            \n            // DeepSeek\u54c1\u724c\u989c\u8272\n            this.colors = {\n                primary: '#1752EF',\n                secondary: '#0F3AC4',\n                accent: '#4A7AFF'\n            };\n        }\n        \n        getInfo() {\n            return {\n                id: 'kjcxds',\n                name: '\u6155\u7136\u79d1\u6280\u7684\u65b0DeepSeek\u5bf9\u8bdd',\n                color1: this.colors.primary,\n                color2: this.colors.secondary,\n                color3: this.colors.secondary,\n                docsURI: 'https://api-docs.deepseek.com/',\n                blocks: [\n                    {\n                        opcode: 'setApiKey',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u8bbe\u7f6eAPI\u5bc6\u94a5 [KEY]',\n                        arguments: {\n                            KEY: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: ''\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setModel',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u4f7f\u7528\u6a21\u578b [MODEL]',\n                        arguments: {\n                            MODEL: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'models'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setWebSearch',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u8054\u7f51\u641c\u7d22 [ENABLED]',\n                        arguments: {\n                            ENABLED: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'switch'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setDeepThinking',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u6df1\u5ea6\u601d\u8003 [ENABLED]',\n                        arguments: {\n                            ENABLED: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'switch'\n                            }\n                        }\n                    },\n                    '---',\n                    {\n                        opcode: 'getDeepThinkingResult',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u6df1\u5ea6\u601d\u8003\u7ed3\u679c',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getThinkingTime',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u6df1\u5ea6\u601d\u8003\u7528\u65f6\uff08\u79d2\uff09',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getLastOutput',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u8f93\u51fa\u7ed3\u679c',\n                        disableMonitor: true\n                    },\n                    '---',\n                    {\n                        opcode: 'sendMessage',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u53d1\u9001\u6d88\u606f [MESSAGE]',\n                        arguments: {\n                            MESSAGE: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u4f60\u597d\uff01\u8bf7\u4ecb\u7ecd\u4e00\u4e0b\u4f60\u81ea\u5df1'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'reset',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u91cd\u7f6e\u5bf9\u8bdd'\n                    }\n                ],\n                menus: {\n                    models: {\n                        acceptReporters: false,\n                        items: ['V1', 'V2', 'V3', 'V3.1']\n                    },\n                    switch: {\n                        acceptReporters: false,\n                        items: ['\u6253\u5f00', '\u5173\u95ed']\n                    }\n                }\n            };\n        }\n        \n        // \u8bbe\u7f6eAPI\u5bc6\u94a5\n        setApiKey(args) {\n            const key = args.KEY.trim();\n            if (key) {\n                this.apiKey = key;\n                console.log('API\u5bc6\u94a5\u5df2\u8bbe\u7f6e');\n            }\n        }\n        \n        // \u8bbe\u7f6e\u6a21\u578b\n        setModel(args) {\n            if (!this.deepThinkingEnabled) {\n                const modelKey = args.MODEL;\n                this.currentModel = this.modelMap[modelKey] || this.modelMap['V1'];\n                console.log(`\u6a21\u578b\u5df2\u8bbe\u7f6e\u4e3a: ${modelKey} (${this.currentModel})`);\n            }\n        }\n        \n        // \u8bbe\u7f6e\u8054\u7f51\u641c\u7d22\n        setWebSearch(args) {\n            this.webSearchEnabled = (args.ENABLED === '\u6253\u5f00');\n            console.log(`\u8054\u7f51\u641c\u7d22: ${this.webSearchEnabled ? '\u5f00\u542f' : '\u5173\u95ed'}`);\n        }\n        \n        // \u8bbe\u7f6e\u6df1\u5ea6\u601d\u8003\n        setDeepThinking(args) {\n            this.deepThinkingEnabled = (args.ENABLED === '\u6253\u5f00');\n            if (this.deepThinkingEnabled) {\n                this.currentModel = this.modelMap['V3.1'];\n            }\n            console.log(`\u6df1\u5ea6\u601d\u8003: ${this.deepThinkingEnabled ? '\u5f00\u542f' : '\u5173\u95ed'}`);\n        }\n        \n        // \u83b7\u53d6\u6df1\u5ea6\u601d\u8003\u7ed3\u679c\n        getDeepThinkingResult() {\n            return this.lastDeepThinkingResult || '\u6682\u65e0\u6df1\u5ea6\u601d\u8003\u7ed3\u679c';\n        }\n        \n        // \u83b7\u53d6\u601d\u8003\u7528\u65f6\n        getThinkingTime() {\n            if (this.lastThinkingTime === 0) return '0';\n            return (Math.round(this.lastThinkingTime / 100) / 10).toString();\n        }\n        \n        // \u83b7\u53d6\u8f93\u51fa\u7ed3\u679c\n        getLastOutput() {\n            return this.lastResponse || '\u6682\u65e0\u8f93\u51fa\u7ed3\u679c';\n        }\n        \n        // \u91cd\u7f6e\u5bf9\u8bdd\n        reset() {\n            this.lastResponse = '';\n            this.lastDeepThinkingResult = '';\n            this.lastThinkingTime = 0;\n            this.isProcessing = false;\n            console.log('\u5bf9\u8bdd\u5df2\u91cd\u7f6e');\n        }\n        \n        // \u53d1\u9001\u6d88\u606f\u5230DeepSeek API\n        sendMessage(args) {\n            // \u5982\u679c\u6b63\u5728\u5904\u7406\u4e2d\uff0c\u8fd4\u56de\u9519\u8bef\n            if (this.isProcessing) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u4e0a\u4e00\u4e2a\u8bf7\u6c42\u6b63\u5728\u5904\u7406\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5');\n            }\n            \n            // \u68c0\u67e5API\u5bc6\u94a5\n            if (!this.apiKey) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u8bf7\u5148\u8bbe\u7f6eAPI\u5bc6\u94a5');\n            }\n            \n            const message = args.MESSAGE.trim();\n            if (!message) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u6d88\u606f\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a');\n            }\n            \n            this.isProcessing = true;\n            \n            // \u786e\u5b9a\u5b9e\u9645\u4f7f\u7528\u7684\u6a21\u578b\n            const actualModel = this.deepThinkingEnabled ? this.modelMap['V3.1'] : this.currentModel;\n            \n            // \u6784\u5efa\u8bf7\u6c42\u6570\u636e\n            const requestData = {\n                model: actualModel,\n                messages: [\n                    {\n                        role: 'user',\n                        content: message\n                    }\n                ],\n                stream: false\n            };\n            \n            // \u6dfb\u52a0\u8054\u7f51\u641c\u7d22\u53c2\u6570\n            if (this.webSearchEnabled) {\n                requestData.web_search = true;\n            }\n            \n            // \u8bb0\u5f55\u5f00\u59cb\u65f6\u95f4\n            const startTime = Date.now();\n            \n            // \u53d1\u9001API\u8bf7\u6c42\n            return fetch('https://api.deepseek.com/chat/completions', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + this.apiKey\n                },\n                body: JSON.stringify(requestData)\n            })\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error(`HTTP\u9519\u8bef: ${response.status}`);\n                }\n                return response.json();\n            })\n            .then(data => {\n                const endTime = Date.now();\n                this.lastThinkingTime = endTime - startTime;\n                \n                if (data.error) {\n                    throw new Error(data.error.message || 'API\u8fd4\u56de\u9519\u8bef');\n                }\n                \n                if (data.choices && data.choices.length > 0) {\n                    this.lastResponse = data.choices[0].message.content;\n                    \n                    // \u63d0\u53d6\u6df1\u5ea6\u601d\u8003\u7ed3\u679c\n                    if (data.choices[0].message.reasoning_content) {\n                        this.lastDeepThinkingResult = data.choices[0].message.reasoning_content;\n                    } else if (this.deepThinkingEnabled) {\n                        this.lastDeepThinkingResult = '\u6df1\u5ea6\u601d\u8003\u5185\u5bb9\u672a\u8fd4\u56de';\n                    } else {\n                        this.lastDeepThinkingResult = '\u6df1\u5ea6\u601d\u8003\u529f\u80fd\u672a\u5f00\u542f';\n                    }\n                    \n                    return this.lastResponse;\n                } else {\n                    throw new Error('API\u8fd4\u56de\u6570\u636e\u5f02\u5e38');\n                }\n            })\n            .catch(error => {\n                console.error('DeepSeek API\u9519\u8bef:', error);\n                this.lastResponse = '';\n                this.lastDeepThinkingResult = '';\n                return `\u9519\u8bef\uff1a${error.message}`;\n            })\n            .finally(() => {\n                this.isProcessing = false;\n            });\n        }\n    }\n    \n    // \u6ce8\u518c\u6269\u5c55\n    Scratch.extensions.register(new DeepSeekDialogs());\n})(Scratch);\n```\u3002", "top": 0, "createdAt": 1764508992, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P10": {"htmlDir": "docs/post/mu-ran-ke-ji-de-zhi-pu-qing-yan-dui-hua.html", "labels": ["\u9002\u914dGandiIDE", "\u9002\u914dTurboWarp", "\u9002\u914dScratch3.0", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668"], "postTitle": "\u6155\u7136\u79d1\u6280\u7684\u667a\u8c31\u6e05\u8a00\u5bf9\u8bdd", "postUrl": "post/mu-ran-ke-ji-de-zhi-pu-qing-yan-dui-hua.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/10", "commentNum": 0, "wordCount": 10619, "description": "```\n(function(Scratch) {\n    'use strict';\n    \n    class GLMChat {\n        constructor() {\n            this.apiKey = '';\n            this.currentModel = 'glm-4-flash';\n            this.webSearchEnabled = false;\n            this.lastResponse = '';\n            this.lastThinkingResult = '';\n            this.lastThinkingTime = 0;\n            this.isProcessing = false;\n            \n            this.modelMap = {\n                'GLM-4-Flash': 'glm-4-flash',\n                'GLM-4-Long': 'glm-4-long',\n                'GLM-4-Air': 'glm-4-air',\n                'GLM-4-AirX': 'glm-4-airx',\n                'GLM-4-Plus': 'glm-4-plus',\n                'GLM-4-0520': 'glm-4-0520',\n                'GLM-4-0520-\u5b9e\u9a8c\u7248': 'glm-4-0520-experimental',\n                'GLM-4V': 'glm-4v',\n                'GLM-4V-Plus': 'glm-4v-plus',\n                'GLM-4V-0520': 'glm-4v-0520'\n            };\n            \n            this.colors = {\n                primary: '#2D5CF6',\n                secondary: '#1A3FD9',\n                accent: '#5B82F8'\n            };\n        }\n        \n        getInfo() {\n            return {\n                id: 'kjcxglm',\n                name: '\u6155\u7136\u79d1\u6280\u7684\u667a\u8c31\u6e05\u8a00',\n                color1: this.colors.primary,\n                color2: this.colors.secondary,\n                color3: this.colors.accent,\n                docsURI: 'https://open.bigmodel.cn/',\n                blocks: [\n                    {\n                        opcode: 'setApiKey',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u8bbe\u7f6eAPI\u5bc6\u94a5 [KEY]',\n                        arguments: {\n                            KEY: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: ''\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setModel',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u4f7f\u7528\u6a21\u578b [MODEL]',\n                        arguments: {\n                            MODEL: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'models'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setWebSearch',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u8054\u7f51\u641c\u7d22 [ENABLED]',\n                        arguments: {\n                            ENABLED: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'switch'\n                            }\n                        }\n                    },\n                    '---',\n                    {\n                        opcode: 'getThinkingResult',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u601d\u8003\u7ed3\u679c',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getThinkingTime',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u601d\u8003\u7528\u65f6\uff08\u79d2\uff09',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getLastOutput',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u8f93\u51fa\u7ed3\u679c',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getCurrentModel',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u5f53\u524d\u6a21\u578b',\n                        disableMonitor: true\n                    },\n                    '---',\n                    {\n                        opcode: 'sendMessage',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u53d1\u9001\u6d88\u606f [MESSAGE]',\n                        arguments: {\n                            MESSAGE: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u4f60\u597d\uff01\u8bf7\u4ecb\u7ecd\u4e00\u4e0b\u4f60\u81ea\u5df1'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'reset',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u91cd\u7f6e\u5bf9\u8bdd'\n                    }\n                ],\n                menus: {\n                    models: {\n                        acceptReporters: false,\n                        items: [\n                            'GLM-4-Flash',\n                            'GLM-4-Long', \n                            'GLM-4-Air',\n                            'GLM-4-AirX',\n                            'GLM-4-Plus',\n                            'GLM-4-0520',\n                            'GLM-4-0520-\u5b9e\u9a8c\u7248',\n                            'GLM-4V',\n                            'GLM-4V-Plus',\n                            'GLM-4V-0520'\n                        ]\n                    },\n                    switch: {\n                        acceptReporters: false,\n                        items: ['\u6253\u5f00', '\u5173\u95ed']\n                    }\n                }\n            };\n        }\n        \n        setApiKey(args) {\n            const key = args.KEY.trim();\n            if (key) {\n                this.apiKey = key;\n                console.log('API\u5bc6\u94a5\u5df2\u8bbe\u7f6e');\n            }\n        }\n        \n        setModel(args) {\n            const modelKey = args.MODEL;\n            this.currentModel = this.modelMap[modelKey] || this.modelMap['GLM-4-Flash'];\n            console.log(`\u6a21\u578b\u5df2\u8bbe\u7f6e\u4e3a: ${modelKey} (${this.currentModel})`);\n        }\n        \n        setWebSearch(args) {\n            this.webSearchEnabled = (args.ENABLED === '\u6253\u5f00');\n            console.log(`\u8054\u7f51\u641c\u7d22: ${this.webSearchEnabled ? '\u5f00\u542f' : '\u5173\u95ed'}`);\n        }\n        \n        getThinkingResult() {\n            if (!this.lastThinkingResult) return '\u6682\u65e0\u601d\u8003\u7ed3\u679c';\n            return this.lastThinkingResult;\n        }\n        \n        getThinkingTime() {\n            if (this.lastThinkingTime === 0) return '0';\n            return (Math.round(this.lastThinkingTime / 100) / 10).toString();\n        }\n        \n        getLastOutput() {\n            return this.lastResponse || '\u6682\u65e0\u8f93\u51fa\u7ed3\u679c';\n        }\n        \n        getCurrentModel() {\n            for (const [displayName, modelId] of Object.entries(this.modelMap)) {\n                if (modelId === this.currentModel) {\n                    return displayName;\n                }\n            }\n            return this.currentModel;\n        }\n        \n        reset() {\n            this.lastResponse = '';\n            this.lastThinkingResult = '';\n            this.lastThinkingTime = 0;\n            this.isProcessing = false;\n            console.log('\u5bf9\u8bdd\u5df2\u91cd\u7f6e');\n        }\n        \n        sendMessage(args) {\n            if (this.isProcessing) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u4e0a\u4e00\u4e2a\u8bf7\u6c42\u6b63\u5728\u5904\u7406\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5');\n            }\n            \n            if (!this.apiKey) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u8bf7\u5148\u8bbe\u7f6eAPI\u5bc6\u94a5');\n            }\n            \n            const message = args.MESSAGE.trim();\n            if (!message) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u6d88\u606f\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a');\n            }\n            \n            this.isProcessing = true;\n            \n            const requestData = {\n                model: this.currentModel,\n                messages: [\n                    {\n                        role: 'user',\n                        content: message\n                    }\n                ],\n                stream: false\n            };\n            \n            if (this.webSearchEnabled) {\n                requestData.tools = [\n                    {\n                        type: 'web_search',\n                        web_search: {\n                            enable: true,\n                            search_result: true\n                        }\n                    }\n                ];\n            }\n            \n            const startTime = Date.now();\n            \n            return fetch('https://open.bigmodel.cn/api/paas/v4/chat/completions', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + this.apiKey\n                },\n                body: JSON.stringify(requestData)\n            })\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error(`HTTP\u9519\u8bef: ${response.status}`);\n                }\n                return response.json();\n            })\n            .then(data => {\n                const endTime = Date.now();\n                this.lastThinkingTime = endTime - startTime;\n                \n                if (data.error) {\n                    throw new Error(data.error.message || 'API\u8fd4\u56de\u9519\u8bef');\n                }\n                \n                if (data.choices && data.choices.length > 0) {\n                    const message = data.choices[0].message;\n                    \n                    if (Array.isArray(message.content)) {\n                        let textContent = '';\n                        for (const item of message.content) {\n                            if (item.type === 'text') {\n                                textContent += item.text;\n                            }\n                        }\n                        this.lastResponse = textContent;\n                    } else {\n                        this.lastResponse = message.content;\n                    }\n                    \n                    let thinkingInfo = '';\n                    if (data.usage) {\n                        thinkingInfo = `Tokens: \u8f93\u5165${data.usage.prompt_tokens} \u8f93\u51fa${data.usage.completion_tokens} \u603b\u8ba1${data.usage.total_tokens}`;\n                    }\n                    if (data.choices[0].finish_reason) {\n                        thinkingInfo += thinkingInfo ? ` | \u5b8c\u6210\u539f\u56e0: ${data.choices[0].finish_reason}` : `\u5b8c\u6210\u539f\u56e0: ${data.choices[0].finish_reason}`;\n                    }\n                    this.lastThinkingResult = thinkingInfo || '\u65e0\u5143\u6570\u636e\u4fe1\u606f';\n                    \n                    return this.lastResponse;\n                } else {\n                    throw new Error('API\u8fd4\u56de\u6570\u636e\u5f02\u5e38');\n                }\n            })\n            .catch(error => {\n                console.error('\u667a\u8c31\u6e05\u8a00API\u9519\u8bef:', error);\n                this.lastResponse = '';\n                this.lastThinkingResult = '';\n                return `\u9519\u8bef\uff1a${error.message}`;\n            })\n            .finally(() => {\n                this.isProcessing = false;\n            });\n        }\n    }\n    \n    Scratch.extensions.register(new GLMChat());\n})(Scratch);\n```\u3002", "top": 0, "createdAt": 1764509194, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P11": {"htmlDir": "docs/post/mu-ran-ke-ji-de-ChatGPT-dui-hua.html", "labels": ["\u9002\u914dGandiIDE", "\u9002\u914dTurboWarp", "\u9002\u914dScratch3.0", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668"], "postTitle": "\u6155\u7136\u79d1\u6280\u7684ChatGPT\u5bf9\u8bdd", "postUrl": "post/mu-ran-ke-ji-de-ChatGPT-dui-hua.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/11", "commentNum": 0, "wordCount": 11434, "description": "```\n(function(Scratch) {\n    'use strict';\n    \n    class ChatGPTExtension {\n        constructor() {\n            this.apiKey = '';\n            this.currentModel = 'gpt-3.5-turbo';\n            this.webSearchEnabled = false;\n            this.deepThinkingEnabled = false;\n            this.lastResponse = '';\n            this.lastThinkingResult = '';\n            this.lastThinkingTime = 0;\n            this.conversationHistory = [];\n            this.isProcessing = false;\n            \n            // OpenAI\u6a21\u578b\u6620\u5c04\n            this.modelMap = {\n                'GPT-3.5 Turbo': 'gpt-3.5-turbo',\n                'GPT-4': 'gpt-4',\n                'GPT-4 Turbo': 'gpt-4-turbo-preview'\n            };\n            \n            this.colors = {\n                primary: '#10A37F',\n                secondary: '#0D8E6F',\n                accent: '#0B7A5F'\n            };\n        }\n        \n        getInfo() {\n            return {\n                id: 'kjcxchatgpt',\n                name: '\u6155\u7136\u79d1\u6280\u7684ChatGPT\u5bf9\u8bdd',\n                color1: this.colors.primary,\n                color2: this.colors.secondary,\n                color3: this.colors.accent,\n                docsURI: 'https://platform.openai.com/docs/api-reference/chat',\n                blocks: [\n                    {\n                        opcode: 'setApiKey',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u8bbe\u7f6eAPI\u5bc6\u94a5 [KEY]',\n                        arguments: {\n                            KEY: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: ''\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setModel',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u4f7f\u7528\u6a21\u578b [MODEL]',\n                        arguments: {\n                            MODEL: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'models'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setWebSearch',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u8054\u7f51\u641c\u7d22 [ENABLED]',\n                        arguments: {\n                            ENABLED: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'switch'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setDeepThinking',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u6df1\u5ea6\u601d\u8003 [ENABLED]',\n                        arguments: {\n                            ENABLED: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'switch'\n                            }\n                        }\n                    },\n                    '---',\n                    {\n                        opcode: 'getThinkingResult',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u6df1\u5ea6\u601d\u8003\u7ed3\u679c',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getThinkingTime',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u6df1\u5ea6\u601d\u8003\u7528\u65f6\uff08\u79d2\uff09',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getLastOutput',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u8f93\u51fa\u7ed3\u679c',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getCurrentModel',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u5f53\u524d\u6a21\u578b',\n                        disableMonitor: true\n                    },\n                    '---',\n                    {\n                        opcode: 'sendMessage',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u53d1\u9001\u6d88\u606f [MESSAGE]',\n                        arguments: {\n                            MESSAGE: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u4f60\u597d\uff01\u8bf7\u4ecb\u7ecd\u4e00\u4e0b\u4f60\u81ea\u5df1'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'resetConversation',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u91cd\u7f6e\u5bf9\u8bdd\u5386\u53f2'\n                    }\n                ],\n                menus: {\n                    models: {\n                        acceptReporters: false,\n                        items: [\n                            'GPT-3.5 Turbo',\n                            'GPT-4',\n                            'GPT-4 Turbo'\n                        ]\n                    },\n                    switch: {\n                        acceptReporters: false,\n                        items: ['\u6253\u5f00', '\u5173\u95ed']\n                    }\n                }\n            };\n        }\n        \n        setApiKey(args) {\n            const key = args.KEY.trim();\n            if (key) {\n                this.apiKey = key;\n                console.log('API\u5bc6\u94a5\u5df2\u8bbe\u7f6e');\n            }\n        }\n        \n        setModel(args) {\n            const modelKey = args.MODEL;\n            this.currentModel = this.modelMap[modelKey] || this.modelMap['GPT-3.5 Turbo'];\n            console.log(`\u6a21\u578b\u5df2\u8bbe\u7f6e\u4e3a: ${modelKey} (${this.currentModel})`);\n        }\n        \n        setWebSearch(args) {\n            this.webSearchEnabled = (args.ENABLED === '\u6253\u5f00');\n            console.log(`\u8054\u7f51\u641c\u7d22: ${this.webSearchEnabled ? '\u5f00\u542f' : '\u5173\u95ed'}`);\n        }\n        \n        setDeepThinking(args) {\n            this.deepThinkingEnabled = (args.ENABLED === '\u6253\u5f00');\n            console.log(`\u6df1\u5ea6\u601d\u8003: ${this.deepThinkingEnabled ? '\u5f00\u542f' : '\u5173\u95ed'}`);\n        }\n        \n        getThinkingResult() {\n            if (!this.lastThinkingResult) return '\u6682\u65e0\u601d\u8003\u7ed3\u679c';\n            return this.lastThinkingResult;\n        }\n        \n        getThinkingTime() {\n            if (this.lastThinkingTime === 0) return '0';\n            return (Math.round(this.lastThinkingTime / 100) / 10).toString();\n        }\n        \n        getLastOutput() {\n            return this.lastResponse || '\u6682\u65e0\u8f93\u51fa\u7ed3\u679c';\n        }\n        \n        getCurrentModel() {\n            for (const [displayName, modelId] of Object.entries(this.modelMap)) {\n                if (modelId === this.currentModel) {\n                    return displayName;\n                }\n            }\n            return this.currentModel;\n        }\n        \n        resetConversation() {\n            this.conversationHistory = [];\n            this.lastResponse = '';\n            this.lastThinkingResult = '';\n            this.lastThinkingTime = 0;\n            console.log('\u5bf9\u8bdd\u5386\u53f2\u5df2\u91cd\u7f6e');\n        }\n        \n        sendMessage(args) {\n            if (this.isProcessing) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u4e0a\u4e00\u4e2a\u8bf7\u6c42\u6b63\u5728\u5904\u7406\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5');\n            }\n            \n            if (!this.apiKey) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u8bf7\u5148\u8bbe\u7f6eAPI\u5bc6\u94a5');\n            }\n            \n            const message = args.MESSAGE.trim();\n            if (!message) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u6d88\u606f\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a');\n            }\n            \n            this.isProcessing = true;\n            \n            // \u6784\u5efa\u5bf9\u8bdd\u6d88\u606f[citation:1]\n            const messages = [...this.conversationHistory];\n            \n            // \u6dfb\u52a0\u7cfb\u7edf\u63d0\u793a\u8bcd\n            let systemMessage = '\u4f60\u662f\u4e00\u4e2a\u6709\u5e2e\u52a9\u7684AI\u52a9\u624b\u3002", "top": 0, "createdAt": 1764509286, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P12": {"htmlDir": "docs/post/mu-ran-ke-ji-de-dou-bao-AI-dui-hua.html", "labels": ["\u9002\u914dGandiIDE", "\u9002\u914dTurboWarp", "\u9002\u914dScratch3.0", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668"], "postTitle": "\u6155\u7136\u79d1\u6280\u7684\u8c46\u5305AI\u5bf9\u8bdd", "postUrl": "post/mu-ran-ke-ji-de-dou-bao-AI-dui-hua.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/12", "commentNum": 0, "wordCount": 10148, "description": "```\n(function(Scratch) {\n    'use strict';\n    \n    class DouBaoChat {\n        constructor() {\n            this.apiKey = '';\n            this.currentModel = 'Doubao-1.5-pro-32k';\n            this.deepThinkingEnabled = false;\n            this.lastResponse = '';\n            this.lastThinkingResult = '';\n            this.lastThinkingTime = 0;\n            this.isProcessing = false;\n            \n            // \u8c46\u5305\u6a21\u578b\u6620\u5c04\n            this.modelMap = {\n                '\u8c46\u5305-Pro': 'Doubao-1.5-pro-32k',\n                '\u8c46\u5305-Lite': 'Doubao-1.5-lite-32k',\n                '\u8c46\u5305-\u6807\u51c6': 'Doubao-pro-32k'\n            };\n            \n            this.colors = {\n                primary: '#FF6B35',\n                secondary: '#FF8E53',\n                accent: '#FFA726'\n            };\n        }\n        \n        getInfo() {\n            return {\n                id: 'kjcxdb',\n                name: '\u6155\u7136\u79d1\u6280\u7684\u4e0e\u8c46\u5305\u5bf9\u8bdd',\n                color1: this.colors.primary,\n                color2: this.colors.secondary,\n                color3: this.colors.accent,\n                docsURI: 'https://docs.console.zenlayer.com/api-reference/cn/aigw/chat-completion/doubao/doubao-context-chat-completion',\n                blocks: [\n                    {\n                        opcode: 'setApiKey',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u8bbe\u7f6eAPI\u5bc6\u94a5 [KEY]',\n                        arguments: {\n                            KEY: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: ''\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setModel',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u4f7f\u7528\u6a21\u578b [MODEL]',\n                        arguments: {\n                            MODEL: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'models'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setDeepThinking',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u6df1\u5ea6\u601d\u8003 [ENABLED]',\n                        arguments: {\n                            ENABLED: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'switch'\n                            }\n                        }\n                    },\n                    '---',\n                    {\n                        opcode: 'getThinkingResult',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u6df1\u5ea6\u601d\u8003\u7ed3\u679c',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getThinkingTime',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u6df1\u5ea6\u601d\u8003\u7528\u65f6\uff08\u79d2\uff09',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getLastOutput',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u8f93\u51fa\u7ed3\u679c',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getCurrentModel',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u5f53\u524d\u6a21\u578b',\n                        disableMonitor: true\n                    },\n                    '---',\n                    {\n                        opcode: 'sendMessage',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u53d1\u9001\u6d88\u606f [MESSAGE]',\n                        arguments: {\n                            MESSAGE: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u4f60\u597d\uff01\u8bf7\u4ecb\u7ecd\u4e00\u4e0b\u4f60\u81ea\u5df1'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'reset',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u91cd\u7f6e\u5bf9\u8bdd'\n                    }\n                ],\n                menus: {\n                    models: {\n                        acceptReporters: false,\n                        items: [\n                            '\u8c46\u5305-Pro',\n                            '\u8c46\u5305-Lite', \n                            '\u8c46\u5305-\u6807\u51c6'\n                        ]\n                    },\n                    switch: {\n                        acceptReporters: false,\n                        items: ['\u6253\u5f00', '\u5173\u95ed']\n                    }\n                }\n            };\n        }\n        \n        setApiKey(args) {\n            const key = args.KEY.trim();\n            if (key) {\n                this.apiKey = key;\n                console.log('API\u5bc6\u94a5\u5df2\u8bbe\u7f6e');\n            }\n        }\n        \n        setModel(args) {\n            const modelKey = args.MODEL;\n            this.currentModel = this.modelMap[modelKey] || this.modelMap['\u8c46\u5305-Pro'];\n            console.log(`\u6a21\u578b\u5df2\u8bbe\u7f6e\u4e3a: ${modelKey} (${this.currentModel})`);\n        }\n        \n        setDeepThinking(args) {\n            this.deepThinkingEnabled = (args.ENABLED === '\u6253\u5f00');\n            console.log(`\u6df1\u5ea6\u601d\u8003: ${this.deepThinkingEnabled ? '\u5f00\u542f' : '\u5173\u95ed'}`);\n        }\n        \n        getThinkingResult() {\n            if (!this.lastThinkingResult) return '\u6682\u65e0\u601d\u8003\u7ed3\u679c';\n            return this.lastThinkingResult;\n        }\n        \n        getThinkingTime() {\n            if (this.lastThinkingTime === 0) return '0';\n            return (Math.round(this.lastThinkingTime / 100) / 10).toString();\n        }\n        \n        getLastOutput() {\n            return this.lastResponse || '\u6682\u65e0\u8f93\u51fa\u7ed3\u679c';\n        }\n        \n        getCurrentModel() {\n            for (const [displayName, modelId] of Object.entries(this.modelMap)) {\n                if (modelId === this.currentModel) {\n                    return displayName;\n                }\n            }\n            return this.currentModel;\n        }\n        \n        reset() {\n            this.lastResponse = '';\n            this.lastThinkingResult = '';\n            this.lastThinkingTime = 0;\n            this.isProcessing = false;\n            console.log('\u5bf9\u8bdd\u5df2\u91cd\u7f6e');\n        }\n        \n        sendMessage(args) {\n            if (this.isProcessing) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u4e0a\u4e00\u4e2a\u8bf7\u6c42\u6b63\u5728\u5904\u7406\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5');\n            }\n            \n            if (!this.apiKey) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u8bf7\u5148\u8bbe\u7f6eAPI\u5bc6\u94a5');\n            }\n            \n            const message = args.MESSAGE.trim();\n            if (!message) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u6d88\u606f\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a');\n            }\n            \n            this.isProcessing = true;\n            \n            // \u6784\u5efa\u8c46\u5305API\u8bf7\u6c42\u6570\u636e[citation:3]\n            const requestData = {\n                model: this.currentModel,\n                messages: [\n                    {\n                        role: 'user',\n                        content: message\n                    }\n                ],\n                stream: false,\n                temperature: 0.7,\n                max_tokens: 1024\n            };\n            \n            // \u5982\u679c\u5f00\u542f\u6df1\u5ea6\u601d\u8003\uff0c\u8c03\u6574\u53c2\u6570\u4ee5\u83b7\u5f97\u66f4\u8be6\u7ec6\u7684\u54cd\u5e94\n            if (this.deepThinkingEnabled) {\n                requestData.temperature = 0.3; // \u66f4\u4f4e\u7684\u6e29\u5ea6\u4ee5\u83b7\u5f97\u66f4\u96c6\u4e2d\u7684\u601d\u8003\n                requestData.max_tokens = 2048; // \u66f4\u591a\u7684token\u4ee5\u5bb9\u7eb3\u601d\u8003\u8fc7\u7a0b\n            }\n            \n            const startTime = Date.now();\n            \n            // \u8c03\u7528\u8c46\u5305API[citation:3]\n            return fetch('https://gateway.theturbo.ai/v1/context/chat/completions', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + this.apiKey,\n                    'Accept': 'application/json'\n                },\n                body: JSON.stringify(requestData)\n            })\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error(`HTTP\u9519\u8bef: ${response.status}`);\n                }\n                return response.json();\n            })\n            .then(data => {\n                const endTime = Date.now();\n                this.lastThinkingTime = endTime - startTime;\n                \n                if (data.error) {\n                    throw new Error(data.error.message || 'API\u8fd4\u56de\u9519\u8bef');\n                }\n                \n                if (data.choices && data.choices.length > 0) {\n                    const message = data.choices[0].message;\n                    \n                    // \u83b7\u53d6\u54cd\u5e94\u5185\u5bb9\n                    this.lastResponse = message.content || '\u65e0\u54cd\u5e94\u5185\u5bb9';\n                    \n                    // \u6784\u5efa\u601d\u8003\u7ed3\u679c\u4fe1\u606f\n                    let thinkingInfo = '';\n                    if (data.usage) {\n                        thinkingInfo = `Tokens\u4f7f\u7528: \u8f93\u5165${data.usage.prompt_tokens} \u8f93\u51fa${data.usage.completion_tokens} \u603b\u8ba1${data.usage.total_tokens}`;\n                    }\n                    if (data.choices[0].finish_reason) {\n                        thinkingInfo += thinkingInfo ? ` | \u5b8c\u6210\u539f\u56e0: ${data.choices[0].finish_reason}` : `\u5b8c\u6210\u539f\u56e0: ${data.choices[0].finish_reason}`;\n                    }\n                    \n                    // \u5982\u679c\u662f\u6df1\u5ea6\u601d\u8003\u6a21\u5f0f\uff0c\u5c1d\u8bd5\u4ece\u54cd\u5e94\u4e2d\u63d0\u53d6\u66f4\u591a\u601d\u8003\u4fe1\u606f\n                    if (this.deepThinkingEnabled) {\n                        // \u8fd9\u91cc\u53ef\u4ee5\u6dfb\u52a0\u5bf9\u601d\u8003\u8fc7\u7a0b\u7684\u89e3\u6790\u903b\u8f91\n                        // \u8c46\u5305API\u53ef\u80fd\u4e0d\u4f1a\u76f4\u63a5\u8fd4\u56de\u601d\u8003\u8fc7\u7a0b\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u8bb0\u5f55\u4e00\u4e9b\u5143\u6570\u636e\n                        thinkingInfo += ' | \u6df1\u5ea6\u601d\u8003\u6a21\u5f0f: \u5df2\u5f00\u542f';\n                    }\n                    \n                    this.lastThinkingResult = thinkingInfo || '\u65e0\u5143\u6570\u636e\u4fe1\u606f';\n                    \n                    return this.lastResponse;\n                } else {\n                    throw new Error('API\u8fd4\u56de\u6570\u636e\u5f02\u5e38');\n                }\n            })\n            .catch(error => {\n                console.error('\u8c46\u5305API\u9519\u8bef:', error);\n                this.lastResponse = '';\n                this.lastThinkingResult = '';\n                return `\u9519\u8bef\uff1a${error.message}`;\n            })\n            .finally(() => {\n                this.isProcessing = false;\n            });\n        }\n    }\n    \n    Scratch.extensions.register(new DouBaoChat());\n})(Scratch);\n```\u3002", "top": 0, "createdAt": 1764509558, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P13": {"htmlDir": "docs/post/mu-ran-ke-ji-de-teng-xun-hun-yuan-da-mo-xing-dui-hua.html", "labels": ["\u9002\u914dGandiIDE", "\u9002\u914dTurboWarp", "\u9002\u914dScratch3.0", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668"], "postTitle": "\u6155\u7136\u79d1\u6280\u7684\u817e\u8baf\u6df7\u5143\u5927\u6a21\u578b\u5bf9\u8bdd", "postUrl": "post/mu-ran-ke-ji-de-teng-xun-hun-yuan-da-mo-xing-dui-hua.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/13", "commentNum": 0, "wordCount": 11485, "description": "```\n(function(Scratch) {\n    'use strict';\n    \n    class TencentHunyuanExtension {\n        constructor() {\n            this.apiKey = '';\n            this.currentModel = 'hunyuan-turbo';\n            this.webSearchEnabled = false;\n            this.deepThinkingEnabled = false;\n            this.lastResponse = '';\n            this.lastThinkingResult = '';\n            this.lastThinkingTime = 0;\n            this.conversationHistory = [];\n            this.isProcessing = false;\n            \n            // \u817e\u8baf\u6df7\u5143\u6a21\u578b\u6620\u5c04[citation:2][citation:10]\n            this.modelMap = {\n                '\u6df7\u5143Turbo': 'hunyuan-turbo',\n                '\u6df7\u5143Pro': 'hunyuan-pro',\n                '\u6df7\u5143\u6807\u51c6': 'hunyuan-standard'\n            };\n            \n            this.colors = {\n                primary: '#006EFF',\n                secondary: '#0052CC',\n                accent: '#003D99'\n            };\n        }\n        \n        getInfo() {\n            return {\n                id: 'kjcxyb',\n                name: '\u6155\u7136\u79d1\u6280\u7684\u817e\u8baf\u5143\u5b9d\u5bf9\u8bdd',\n                color1: this.colors.primary,\n                color2: this.colors.secondary,\n                color3: this.colors.accent,\n                docsURI: 'https://cloud.tencent.com/document/product/1729',\n                blocks: [\n                    {\n                        opcode: 'setApiKey',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u8bbe\u7f6eAPI\u5bc6\u94a5 [KEY]',\n                        arguments: {\n                            KEY: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: ''\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setModel',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u4f7f\u7528\u6a21\u578b [MODEL]',\n                        arguments: {\n                            MODEL: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'models'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setWebSearch',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u8054\u7f51\u641c\u7d22 [ENABLED]',\n                        arguments: {\n                            ENABLED: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'switch'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'setDeepThinking',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u6df1\u5ea6\u601d\u8003 [ENABLED]',\n                        arguments: {\n                            ENABLED: {\n                                type: Scratch.ArgumentType.STRING,\n                                menu: 'switch'\n                            }\n                        }\n                    },\n                    '---',\n                    {\n                        opcode: 'getThinkingResult',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u6df1\u5ea6\u601d\u8003\u7ed3\u679c',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getThinkingTime',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u6df1\u5ea6\u601d\u8003\u7528\u65f6\uff08\u79d2\uff09',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getLastOutput',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u8f93\u51fa\u7ed3\u679c',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getCurrentModel',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u5f53\u524d\u6a21\u578b',\n                        disableMonitor: true\n                    },\n                    '---',\n                    {\n                        opcode: 'sendMessage',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u53d1\u9001\u6d88\u606f [MESSAGE]',\n                        arguments: {\n                            MESSAGE: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u4f60\u597d\uff01\u8bf7\u4ecb\u7ecd\u4e00\u4e0b\u4f60\u81ea\u5df1'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'resetConversation',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u91cd\u7f6e\u5bf9\u8bdd\u5386\u53f2'\n                    }\n                ],\n                menus: {\n                    models: {\n                        acceptReporters: false,\n                        items: [\n                            '\u6df7\u5143Turbo',\n                            '\u6df7\u5143Pro',\n                            '\u6df7\u5143\u6807\u51c6'\n                        ]\n                    },\n                    switch: {\n                        acceptReporters: false,\n                        items: ['\u6253\u5f00', '\u5173\u95ed']\n                    }\n                }\n            };\n        }\n        \n        setApiKey(args) {\n            const key = args.KEY.trim();\n            if (key) {\n                this.apiKey = key;\n                console.log('API\u5bc6\u94a5\u5df2\u8bbe\u7f6e');\n            }\n        }\n        \n        setModel(args) {\n            const modelKey = args.MODEL;\n            this.currentModel = this.modelMap[modelKey] || this.modelMap['\u6df7\u5143Turbo'];\n            console.log(`\u6a21\u578b\u5df2\u8bbe\u7f6e\u4e3a: ${modelKey} (${this.currentModel})`);\n        }\n        \n        setWebSearch(args) {\n            this.webSearchEnabled = (args.ENABLED === '\u6253\u5f00');\n            console.log(`\u8054\u7f51\u641c\u7d22: ${this.webSearchEnabled ? '\u5f00\u542f' : '\u5173\u95ed'}`);\n        }\n        \n        setDeepThinking(args) {\n            this.deepThinkingEnabled = (args.ENABLED === '\u6253\u5f00');\n            console.log(`\u6df1\u5ea6\u601d\u8003: ${this.deepThinkingEnabled ? '\u5f00\u542f' : '\u5173\u95ed'}`);\n        }\n        \n        getThinkingResult() {\n            if (!this.lastThinkingResult) return '\u6682\u65e0\u601d\u8003\u7ed3\u679c';\n            return this.lastThinkingResult;\n        }\n        \n        getThinkingTime() {\n            if (this.lastThinkingTime === 0) return '0';\n            return (Math.round(this.lastThinkingTime / 100) / 10).toString();\n        }\n        \n        getLastOutput() {\n            return this.lastResponse || '\u6682\u65e0\u8f93\u51fa\u7ed3\u679c';\n        }\n        \n        getCurrentModel() {\n            for (const [displayName, modelId] of Object.entries(this.modelMap)) {\n                if (modelId === this.currentModel) {\n                    return displayName;\n                }\n            }\n            return this.currentModel;\n        }\n        \n        resetConversation() {\n            this.conversationHistory = [];\n            this.lastResponse = '';\n            this.lastThinkingResult = '';\n            this.lastThinkingTime = 0;\n            console.log('\u5bf9\u8bdd\u5386\u53f2\u5df2\u91cd\u7f6e');\n        }\n        \n        sendMessage(args) {\n            if (this.isProcessing) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u4e0a\u4e00\u4e2a\u8bf7\u6c42\u6b63\u5728\u5904\u7406\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5');\n            }\n            \n            if (!this.apiKey) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u8bf7\u5148\u8bbe\u7f6eAPI\u5bc6\u94a5');\n            }\n            \n            const message = args.MESSAGE.trim();\n            if (!message) {\n                return Promise.resolve('\u9519\u8bef\uff1a\u6d88\u606f\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a');\n            }\n            \n            this.isProcessing = true;\n            \n            // \u6784\u5efa\u5bf9\u8bdd\u6d88\u606f[citation:2][citation:9]\n            const messages = [...this.conversationHistory];\n            \n            // \u6dfb\u52a0\u7cfb\u7edf\u63d0\u793a\u8bcd\n            let systemMessage = '\u4f60\u662f\u4e00\u4e2a\u6709\u5e2e\u52a9\u7684AI\u52a9\u624b\u3002", "top": 0, "createdAt": 1764509623, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P14": {"htmlDir": "docs/post/Morgan-de-you-jian-fa-song.html", "labels": ["\u672a\u8fdb\u884c\u9002\u914d\u6d4b\u8bd5"], "postTitle": "Morgan\u7684\u90ae\u4ef6\u53d1\u9001", "postUrl": "post/Morgan-de-you-jian-fa-song.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/14", "commentNum": 0, "wordCount": 11179, "description": "```\n(function(Scratch) {\n    'use strict';\n    \n    class MorganMailExtension {\n        constructor() {\n            // \u4f7f\u7528EmailJS\u4f5c\u4e3a\u90ae\u4ef6\u53d1\u9001\u670d\u52a1\n            this.emailjsUserId = '';\n            this.emailjsServiceId = '';\n            this.emailjsTemplateId = '';\n            this.isInitialized = false;\n            \n            this.colors = {\n                primary: '#2E7D32',\n                secondary: '#1B5E20',\n                accent: '#4CAF50'\n            };\n        }\n        \n        getInfo() {\n            return {\n                id: 'Mmail',\n                name: 'Morgan\u7684\u90ae\u4ef6\u53d1\u9001',\n                color1: this.colors.primary,\n                color2: this.colors.secondary,\n                color3: this.colors.accent,\n                docsURI: 'https://www.emailjs.com/docs/',\n                blocks: [\n                    {\n                        opcode: 'initializeEmailService',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u521d\u59cb\u5316\u90ae\u4ef6\u670d\u52a1 UserID:[USER_ID] ServiceID:[SERVICE_ID] TemplateID:[TEMPLATE_ID]',\n                        arguments: {\n                            USER_ID: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: 'your_user_id'\n                            },\n                            SERVICE_ID: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: 'your_service_id'\n                            },\n                            TEMPLATE_ID: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: 'your_template_id'\n                            }\n                        }\n                    },\n                    '---',\n                    {\n                        opcode: 'sendEmail',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u53d1\u9001\u90ae\u4ef6 \u53d1\u4ef6\u4eba:[FROM_EMAIL] \u6536\u4ef6\u4eba:[TO_EMAIL] \u4e3b\u9898:[SUBJECT] \u5185\u5bb9:[CONTENT]',\n                        arguments: {\n                            FROM_EMAIL: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: 'sender@example.com'\n                            },\n                            TO_EMAIL: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: 'receiver@example.com'\n                            },\n                            SUBJECT: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: 'Hello from Scratch!'\n                            },\n                            CONTENT: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u8fd9\u662f\u4e00\u5c01\u6765\u81eaScratch\u7684\u6d4b\u8bd5\u90ae\u4ef6\u3002", "top": 0, "createdAt": 1764509737, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-11-30", "dateLabelColor": "#0969da"}, "P15": {"htmlDir": "docs/post/mu-ran-ke-ji-de-wei-xin-feng-ge-dan-chuang.html", "labels": ["\u9002\u914dGandiIDE", "\u9002\u914dTurboWarp", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668"], "postTitle": "\u6155\u7136\u79d1\u6280\u7684\u5fae\u4fe1\u98ce\u683c\u5f39\u7a97", "postUrl": "post/mu-ran-ke-ji-de-wei-xin-feng-ge-dan-chuang.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/15", "commentNum": 0, "wordCount": 14465, "description": "```\n(function(Scratch) {\n    'use strict';\n    \n    // \u6269\u5c55\u7c7b\u5b9a\u4e49\n    class WeChatDialogs {\n        constructor() {\n            // \u5b58\u50a8\u56de\u8c03\u51fd\u6570\n            this.callbacks = {};\n            // \u5b58\u50a8\u5f53\u524d\u6fc0\u6d3b\u7684\u5f39\u7a97\n            this.activeDialog = null;\n        }\n        \n        getInfo() {\n            return {\n                id: 'wxtc',\n                name: '\u5fae\u4fe1\u5f39\u7a97',\n                color1: '#07C160',\n                color2: '#06AD56',\n                color3: '#06AD56',\n                docsURI: 'https://kejicx.github.io',\n                blocks: [\n                    {\n                        opcode: 'showAlert',\n                        blockType: Scratch.BlockType.COMMAND,\n                        text: '\u663e\u793a\u6d88\u606f\u5f39\u7a97 \u5185\u5bb9 [CONTENT] \u6309\u94ae\u6587\u5b57 [BUTTON]',\n                        arguments: {\n                            CONTENT: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u64cd\u4f5c\u6210\u529f'\n                            },\n                            BUTTON: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u786e\u5b9a'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'showConfirm',\n                        blockType: Scratch.BlockType.BOOLEAN,\n                        text: '\u663e\u793a\u786e\u8ba4\u5f39\u7a97 \u5185\u5bb9 [CONTENT] \u786e\u5b9a\u6587\u5b57 [OK] \u53d6\u6d88\u6587\u5b57 [CANCEL]',\n                        arguments: {\n                            CONTENT: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u786e\u5b9a\u8981\u6267\u884c\u6b64\u64cd\u4f5c\u5417\uff1f'\n                            },\n                            OK: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u786e\u5b9a'\n                            },\n                            CANCEL: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u53d6\u6d88'\n                            }\n                        }\n                    },\n                    {\n                        opcode: 'showPrompt',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u663e\u793a\u8f93\u5165\u5f39\u7a97 \u5185\u5bb9 [CONTENT] \u63d0\u793a [PLACEHOLDER] \u786e\u5b9a\u6587\u5b57 [OK] \u53d6\u6d88\u6587\u5b57 [CANCEL]',\n                        arguments: {\n                            CONTENT: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u8bf7\u8f93\u5165\u5185\u5bb9'\n                            },\n                            PLACEHOLDER: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u5728\u6b64\u8f93\u5165...'\n                            },\n                            OK: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u786e\u5b9a'\n                            },\n                            CANCEL: {\n                                type: Scratch.ArgumentType.STRING,\n                                defaultValue: '\u53d6\u6d88'\n                            }\n                        }\n                    },\n                    '---',\n                    {\n                        opcode: 'getLastResult',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u4e0a\u6b21\u5f39\u7a97\u7ed3\u679c',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'getLastInput',\n                        blockType: Scratch.BlockType.REPORTER,\n                        text: '\u4e0a\u6b21\u8f93\u5165\u5185\u5bb9',\n                        disableMonitor: true\n                    },\n                    {\n                        opcode: 'isConfirmed',\n                        blockType: Scratch.BlockType.BOOLEAN,\n                        text: '\u4e0a\u6b21\u662f\u5426\u786e\u8ba4',\n                        disableMonitor: true\n                    }\n                ],\n                menus: {}\n            };\n        }\n        \n        // \u663e\u793a\u6d88\u606f\u5f39\u7a97\n        showAlert(args) {\n            return new Promise((resolve) => {\n                this._createDialog({\n                    type: 'alert',\n                    content: args.CONTENT,\n                    buttonText: args.BUTTON,\n                    onClose: () => {\n                        this.lastResult = 'confirmed';\n                        resolve();\n                    }\n                });\n            });\n        }\n        \n        // \u663e\u793a\u786e\u8ba4\u5f39\u7a97\n        showConfirm(args) {\n            return new Promise((resolve) => {\n                this._createDialog({\n                    type: 'confirm',\n                    content: args.CONTENT,\n                    okText: args.OK,\n                    cancelText: args.CANCEL,\n                    onConfirm: () => {\n                        this.lastResult = 'confirmed';\n                        this.lastConfirmed = true;\n                        resolve(true);\n                    },\n                    onCancel: () => {\n                        this.lastResult = 'cancelled';\n                        this.lastConfirmed = false;\n                        resolve(false);\n                    }\n                });\n            });\n        }\n        \n        // \u663e\u793a\u8f93\u5165\u5f39\u7a97\n        showPrompt(args) {\n            return new Promise((resolve) => {\n                this._createDialog({\n                    type: 'prompt',\n                    content: args.CONTENT,\n                    placeholder: args.PLACEHOLDER,\n                    okText: args.OK,\n                    cancelText: args.CANCEL,\n                    onConfirm: (inputValue) => {\n                        this.lastResult = 'confirmed';\n                        this.lastInput = inputValue || '';\n                        this.lastConfirmed = true;\n                        resolve(inputValue || '');\n                    },\n                    onCancel: () => {\n                        this.lastResult = 'cancelled';\n                        this.lastInput = '';\n                        this.lastConfirmed = false;\n                        resolve('');\n                    }\n                });\n            });\n        }\n        \n        // \u83b7\u53d6\u4e0a\u6b21\u5f39\u7a97\u7ed3\u679c\n        getLastResult() {\n            return this.lastResult || 'none';\n        }\n        \n        // \u83b7\u53d6\u4e0a\u6b21\u8f93\u5165\u5185\u5bb9\n        getLastInput() {\n            return this.lastInput || '';\n        }\n        \n        // \u83b7\u53d6\u4e0a\u6b21\u662f\u5426\u786e\u8ba4\n        isConfirmed() {\n            return !!this.lastConfirmed;\n        }\n        \n        // \u521b\u5efa\u5f39\u7a97\u7684\u79c1\u6709\u65b9\u6cd5\n        _createDialog(options) {\n            // \u5982\u679c\u5df2\u6709\u5f39\u7a97\uff0c\u5148\u5173\u95ed\n            if (this.activeDialog) {\n                this._closeDialog();\n            }\n            \n            // \u521b\u5efa\u5f39\u7a97\u5bb9\u5668\n            const dialog = document.createElement('div');\n            dialog.className = 'wx-dialog-overlay';\n            dialog.style.cssText = `\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0, 0, 0, 0.5);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                z-index: 9999;\n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\n            `;\n            \n            // \u521b\u5efa\u5f39\u7a97\u5185\u5bb9\n            const content = document.createElement('div');\n            content.className = 'wx-dialog-content';\n            content.style.cssText = `\n                background: white;\n                border-radius: 12px;\n                width: 270px;\n                overflow: hidden;\n                animation: dialogShow 0.3s ease;\n            `;\n            \n            // \u6dfb\u52a0CSS\u52a8\u753b\n            if (!document.getElementById('wx-dialog-styles')) {\n                const style = document.createElement('style');\n                style.id = 'wx-dialog-styles';\n                style.textContent = `\n                    @keyframes dialogShow {\n                        from {\n                            opacity: 0;\n                            transform: translateY(-20px);\n                        }\n                        to {\n                            opacity: 1;\n                            transform: translateY(0);\n                        }\n                    }\n                `;\n                document.head.appendChild(style);\n            }\n            \n            // \u6784\u5efa\u5f39\u7a97\u5185\u5bb9\n            let dialogHTML = '';\n            \n            // \u5f39\u7a97\u6d88\u606f\n            dialogHTML += `<div style='padding: 20px 20px 15px; text-align: center; font-size: 17px; color: #333; line-height: 1.5;'>${this._escapeHtml(options.content)}</div>`;\n            \n            // \u8f93\u5165\u6846\uff08\u4ec5\u9002\u7528\u4e8e\u8f93\u5165\u5f39\u7a97\uff09\n            if (options.type === 'prompt') {\n                dialogHTML += `\n                    <div style='padding: 0 20px 15px;'>\n                        <input type='text' \n                               class='wx-dialog-input' \n                               placeholder='${this._escapeHtml(options.placeholder)}' \n                               style='width: 100%; \n                                      padding: 12px; \n                                      border: 1px solid #E5E5E5; \n                                      border-radius: 5px; \n                                      font-size: 15px; \n                                      outline: none;\n                                      box-sizing: border-box;'>\n                    </div>\n                `;\n            }\n            \n            // \u6309\u94ae\u533a\u57df\n            dialogHTML += `<div style='display: flex; border-top: 1px solid #F0F0F0;'>`;\n            \n            if (options.type === 'alert') {\n                // \u53ea\u6709\u4e00\u4e2a\u786e\u5b9a\u6309\u94ae\n                dialogHTML += `\n                    <button class='wx-dialog-button confirm' \n                            style='flex: 1; \n                                   padding: 16px; \n                                   border: none; \n                                   background: none; \n                                   font-size: 17px; \n                                   color: #07C160; \n                                   cursor: pointer;'>\n                        ${this._escapeHtml(options.buttonText)}\n                    </button>\n                `;\n            } else {\n                // \u6709\u53d6\u6d88\u548c\u786e\u5b9a\u4e24\u4e2a\u6309\u94ae\n                dialogHTML += `\n                    <button class='wx-dialog-button cancel' \n                            style='flex: 1; \n                                   padding: 16px; \n                                   border: none; \n                                   background: none; \n                                   font-size: 17px; \n                                   color: #333; \n                                   cursor: pointer;\n                                   border-right: 1px solid #F0F0F0;'>\n                        ${this._escapeHtml(options.cancelText)}\n                    </button>\n                    <button class='wx-dialog-button confirm' \n                            style='flex: 1; \n                                   padding: 16px; \n                                   border: none; \n                                   background: none; \n                                   font-size: 17px; \n                                   color: #07C160; \n                                   font-weight: 500; \n                                   cursor: pointer;'>\n                        ${this._escapeHtml(options.okText)}\n                    </button>\n                `;\n            }\n            \n            dialogHTML += `</div>`;\n            \n            content.innerHTML = dialogHTML;\n            dialog.appendChild(content);\n            document.body.appendChild(dialog);\n            \n            this.activeDialog = dialog;\n            \n            // \u6dfb\u52a0\u4e8b\u4ef6\u76d1\u542c\n            const inputField = content.querySelector('.wx-dialog-input');\n            const confirmButton = content.querySelector('.wx-dialog-button.confirm');\n            const cancelButton = content.querySelector('.wx-dialog-button.cancel');\n            \n            const closeDialog = () => {\n                this._closeDialog();\n            };\n            \n            const handleConfirm = () => {\n                if (options.type === 'prompt') {\n                    const value = inputField ? inputField.value : '';\n                    if (options.onConfirm) options.onConfirm(value);\n                } else if (options.type === 'confirm') {\n                    if (options.onConfirm) options.onConfirm();\n                } else {\n                    if (options.onClose) options.onClose();\n                }\n                closeDialog();\n            };\n            \n            const handleCancel = () => {\n                if (options.type === 'confirm' && options.onCancel) {\n                    options.onCancel();\n                } else if (options.type === 'prompt' && options.onCancel) {\n                    options.onCancel();\n                }\n                closeDialog();\n            };\n            \n            // \u7ed1\u5b9a\u4e8b\u4ef6\n            if (confirmButton) {\n                confirmButton.addEventListener('click', handleConfirm);\n            }\n            \n            if (cancelButton) {\n                cancelButton.addEventListener('click', handleCancel);\n            }\n            \n            // \u70b9\u51fb\u906e\u7f69\u5c42\u5173\u95ed\uff08\u4ec5\u9002\u7528\u4e8e\u786e\u8ba4\u548c\u8f93\u5165\u5f39\u7a97\uff09\n            if (options.type !== 'alert') {\n                dialog.addEventListener('click', (e) => {\n                    if (e.target === dialog) {\n                        handleCancel();\n                    }\n                });\n            }\n            \n            // \u8f93\u5165\u6846\u56de\u8f66\u786e\u8ba4\n            if (inputField) {\n                inputField.addEventListener('keypress', (e) => {\n                    if (e.key === 'Enter') {\n                        handleConfirm();\n                    }\n                });\n                \n                // \u81ea\u52a8\u805a\u7126\u8f93\u5165\u6846\n                setTimeout(() => {\n                    inputField.focus();\n                }, 300);\n            }\n        }\n        \n        // \u5173\u95ed\u5f39\u7a97\n        _closeDialog() {\n            if (this.activeDialog) {\n                document.body.removeChild(this.activeDialog);\n                this.activeDialog = null;\n            }\n        }\n        \n        // HTML\u8f6c\u4e49\n        _escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n    }\n    \n    // \u6ce8\u518c\u6269\u5c55\n    Scratch.extensions.register(new WeChatDialogs());\n})(Scratch);\n```\u3002", "top": 0, "createdAt": 1764599982, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-12-01", "dateLabelColor": "#0969da"}, "P16": {"htmlDir": "docs/post/mu-ran-ke-ji-de-ji-mu-yin-cang.html", "labels": ["\u9002\u914dGandiIDE", "\u9002\u914dTurboWarp", "\u9002\u914dScratch3.0", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668"], "postTitle": "\u6155\u7136\u79d1\u6280\u7684\u79ef\u6728\u9690\u85cf", "postUrl": "post/mu-ran-ke-ji-de-ji-mu-yin-cang.html", "postSourceUrl": "https://github.com/ccwmoran/code/issues/16", "commentNum": 0, "wordCount": 4385, "description": "> \u9690\u85cf\u7f16\u8f91\u5668\u4e2d\u6240\u6709\u79ef\u6728\n`\u6155\u7136\u79d1\u6280\u5b98\u7f51ccwmoran.github.io`\n```\n(function(Scratch) {\n    'use strict';\n    const Blockly = Scratch.Blockly;\n\n    class BiyuanExtension {\n        constructor() {\n            this.workspace = null;\n            this.original = {\n                domToBlock: null,\n                setVisible: null,\n                contextMenu: null\n            };\n            this.observer = null;\n            this.checkInterval = null;\n        }\n\n        getInfo() {\n            return {\n                id: 'hide',\n                name: '\u6155\u7136\u79d1\u6280\u7684\u79ef\u6728\u9690\u85cf',\n                color: '#00704A',\n                blocks: []\n            };\n        }\n\n        applyProtection() {\n            // \u4fdd\u5b58\u539f\u59cb\u5f15\u7528\n            const originalContextMenu = Blockly.ContextMenu;\n            \n            // \u52ab\u6301\u79ef\u6728\u521b\u5efa\n            this.original.domToBlock = Blockly.Xml.domToBlock;\n            Blockly.Xml.domToBlock = (xml, ws) => {\n                const block = this.original.domToBlock(xml, ws);\n                this.superHide(block);\n                return block;\n            };\n\n            // \u91cd\u5199\u53ef\u89c1\u6027\u8bbe\u7f6e\n            this.original.setVisible = Blockly.Block.prototype.setVisible;\n            Blockly.Block.prototype.setVisible = function(visible) {\n                return this.original.setVisible.call(this, visible && false);\n            };\n\n            // \u76d1\u63a7DOM\u53d8\u5316\n            this.observer = new MutationObserver(mutations => {\n                mutations.forEach(mutation => {\n                    const element = mutation.target;\n                    if (element.classList?.contains('blocklyBlockCanvas') && \n                        element.style.display !== 'none') {\n                        element.style.display = 'none';\n                    }\n                });\n            });\n\n            // \u4fee\u590dthis\u6307\u5411\u95ee\u9898\n            const self = this;\n            this.original.contextMenu = originalContextMenu;\n            Blockly.ContextMenu = function(...args) {\n                const instance = new originalContextMenu(...args);\n                instance.show = () => {};\n                return instance;\n            };\n        }\n\n        superHide(block) {\n            // \u591a\u5c42\u9690\u85cf\u6280\u672f\n            block.setVisible(false);\n            const svgRoot = block.getSvgRoot();\n            if (svgRoot) {\n                svgRoot.style.display = 'none';\n                svgRoot.setAttribute('visibility', 'hidden');\n                \n                // \u6dfb\u52a0DOM\u76d1\u63a7\n                this.observer.observe(svgRoot, {\n                    attributes: true,\n                    attributeFilter: ['style', 'visibility']\n                });\n            }\n        }\n\n        onInit() {\n            this.workspace = Scratch.vm.runtime.work\u202f\u202fspace;\n            this.applyProtection();\n            \n            // \u521d\u59cb\u9690\u85cf\n            this.workspace.getAllBlocks().forEach(block => {\n                this.superHide(block);\n            });\n            \n            // \u5b9a\u65f6\u68c0\u67e5\n            this.checkInterval = setInterval(() => {\n                this.workspace.getAllBlocks().forEach(block => {\n                    if (block.isVisible() || \n                        (block.getSvgRoot()?.style.display !== 'none') ||\n                        (block.getSvgRoot()?.getAttribute('visibility') === 'visible')) {\n                        this.superHide(block);\n                    }\n                });\n            }, 50);\n        }\n\n        onUnload() {\n            // \u6062\u590d\u539f\u59cb\u73af\u5883\n            Blockly.Xml.domToBlock = this.original.domToBlock;\n            if (Blockly.Block.prototype.setVisible) {\n                Blockly.Block.prototype.setVisible = this.original.setVisible;\n            }\n            Blockly.ContextMenu = this.original.contextMenu;\n            \n            clearInterval(this.checkInterval);\n            this.observer?.disconnect();\n            \n            // \u6062\u590d\u6240\u6709\u5143\u7d20\n            this.workspace.getAllBlocks().forEach(block => {\n                const svgRoot = block.getSvgRoot();\n                if (svgRoot) {\n                    svgRoot.style.display = '';\n                    svgRoot.removeAttribute('visibility');\n                }\n                block.setVisible(true);\n            });\n            this.workspace.resize();\n        }\n    }\n\n    const ext = new BiyuanExtension();\n    Scratch.extensions.register(ext);\n    ext.runtime.once('PROJECT_LOADED', () => ext.onInit());\n    ext.runtime.once('EXTENSION_UNLOADED', () => ext.onUnload());\n})(Scratch);\n```\u3002", "top": 0, "createdAt": 1764600275, "style": "", "script": "<script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>", "head": "", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "createdDate": "2025-12-01", "dateLabelColor": "#0969da"}}, "singeListJson": {}, "labelColorDict": {"\u672a\u8fdb\u884c\u9002\u914d\u6d4b\u8bd5": "#a5d296", "\u9002\u914dGandiIDE": "#5cff6e", "\u9002\u914dScratch3.0": "#1d76db", "\u9002\u914dTurboWarp": "#e2284a", "\u9002\u914d\u5176\u4ed6\u7f16\u8f91\u5668": "#5ca05c"}, "displayTitle": "\u6155\u7136\u79d1\u6280Scratch\u79ef\u6728\u6269\u5c55\u5e93", "faviconUrl": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "ogImage": "https://gpo.saobby.com/i/BA9EN3Rw3fzRUJmu.jpg", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "homeUrl": "https://ccwmoran.github.io/code", "prevUrl": "/index.html", "nextUrl": "disabled"}